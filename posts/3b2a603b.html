<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>ROS-roscpp | Malloy Yuan çš„ä¸ªäººåšå®¢</title><meta name="keywords" content="ROS,Linux"><meta name="author" content="Malloy Yuan"><meta name="copyright" content="Malloy Yuan"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="æœºå™¨äººæ“ä½œç³»ç»Ÿ"><meta property="og:type" content="article"><meta property="og:title" content="ROS-roscpp"><meta property="og:url" content="https://elec-creator.com/posts/3b2a603b.html"><meta property="og:site_name" content="Malloy Yuan çš„ä¸ªäººåšå®¢"><meta property="og:description" content="æœºå™¨äººæ“ä½œç³»ç»Ÿ"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/MCUheart/Hexo-blog-data@1.0.2/image/cover/post-cover/ros-cover.jpg"><meta property="article:published_time" content="2020-04-28T08:26:40.000Z"><meta property="article:modified_time" content="2022-02-10T03:46:06.118Z"><meta property="article:author" content="Malloy Yuan"><meta property="article:tag" content="ROS"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/MCUheart/Hexo-blog-data@1.0.2/image/cover/post-cover/ros-cover.jpg"><link rel="shortcut icon" href="/img/private/favicon.ico"><link rel="canonical" href="https://elec-creator.com/posts/3b2a603b"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""><link rel="preconnect" href="//hm.baidu.com"><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="manifest" href="/img/private/pwa/manifest.json"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="/img/private/pwa/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/img/private/pwa/32.png"><link rel="icon" type="image/png" sizes="16x16" href="/img/private/pwa/16.png"><link rel="mask-icon" href="/img/private/pwa/safari-pinned-tab.svg" color="#5bbad5"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload='this.media="all"'><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle=window.adsbygoogle||[]).push({google_ad_client:"ca-pub-6017375467561303",enable_page_level_ads:"true"})</script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?f0eee211545bfd4d4a152fd36de6c1a1";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-161823084-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-161823084-1")</script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"search.xml",languages:{hits_empty:"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}"}},translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"ç¹",msgToSimplifiedChinese:"ç®€"},noticeOutdate:void 0,highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:200},copy:{success:"å¤åˆ¶æˆåŠŸ",error:"å¤åˆ¶é”™è¯¯",noSupport:"æµè§ˆå™¨ä¸æ”¯æŒ"},relativeDate:{homepage:!1,post:!1},runtime:"å¤©",date_suffix:{just:"åˆšåˆš",min:"åˆ†é’Ÿå‰",hour:"å°æ—¶å‰",day:"å¤©å‰",month:"ä¸ªæœˆå‰"},copyright:void 0,lightbox:"fancybox",Snackbar:void 0,source:{justifiedGallery:{js:"https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js",css:"https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css"}},isPhotoFigcaption:!1,islazyload:!0,isAnchor:!0}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"ROS-roscpp",isPost:!0,isHome:!1,isHighlightShrink:!0,isToc:!0,postUpdate:"2022-02-10 11:46:06"}</script><noscript><style>#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,o){if(0===o)return;const n=864e5*o,a={value:t,expiry:(new Date).getTime()+n};localStorage.setItem(e,JSON.stringify(a))},get:function(e){const t=localStorage.getItem(e);if(!t)return;const o=JSON.parse(t);if(!((new Date).getTime()>o.expiry))return o.value;localStorage.removeItem(e)}},e.getScript=e=>new Promise((t,o)=>{const n=document.createElement("script");n.src=e,n.async=!0,n.onerror=o,n.onload=n.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,t())},document.head.appendChild(n)}),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};const t=saveToLocal.get("theme");"dark"===t?activateDarkMode():"light"===t&&activateLightMode();const o=saveToLocal.get("aside-status");void 0!==o&&("hide"===o?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><link rel="stylesheet" href="//at.alicdn.com/t/font_1975360_mudsyg8elc9.css"><style>.app-refresh{position:fixed;top:-2.2rem;left:0;right:0;z-index:99999;padding:0 1rem;font-size:15px;height:2.2rem;transition:all .3s ease}.app-refresh-wrap{display:flex;color:#fff;height:100%;align-items:center;justify-content:center}.app-refresh-wrap a{color:#fff;text-decoration:underline;cursor:pointer}</style><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="Malloy Yuan çš„ä¸ªäººåšå®¢" type="application/atom+xml"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/private/loading-4.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/MCUheart/Hexo-blog-data@1.0.2/image/portrait/portrait-3.jpg" onerror='onerror=null,src="/img/private/site_img-load-404-1.gif"' alt="avatar"></div><div class="site-data is-center"><div class="data-item"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">54</div></a></div><div class="data-item"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">34</div></a></div><div class="data-item"><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">37</div></a></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>ä¸»é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-list"></i> <span>å¨±ä¹</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i> <span>éŸ³ä¹</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-film"></i> <span>ç”µå½±</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-camera-retro"></i> <span>ç…§ç‰‡</span></a></li><li><a class="site-page child" href="/books/"><i class="fa-fw fas fa-book"></i> <span>é˜…è¯»</span></a></li><li><a class="site-page child" href="/games/"><i class="fa-fw fas fa-gamepad"></i> <span>æ¸¸æˆ</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/messageaboard/"><i class="fa-fw fas fa-comment-dots"></i> <span>ç•™è¨€æ¿</span></a></div><div class="menus_item"><a class="site-page" href="/artitalk/"><i class="fa-fw fas fa-cat"></i> <span>è¯´è¯´</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i> <span>å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-address-book"></i> <span>å…³äº</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(https://cdn.jsdelivr.net/gh/MCUheart/Hexo-blog-data@1.0.2/image/top/post-top/ros-top.jpg)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Malloy Yuan çš„ä¸ªäººåšå®¢</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i> <span>æœç´¢</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>ä¸»é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-list"></i> <span>å¨±ä¹</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i> <span>éŸ³ä¹</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-film"></i> <span>ç”µå½±</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-camera-retro"></i> <span>ç…§ç‰‡</span></a></li><li><a class="site-page child" href="/books/"><i class="fa-fw fas fa-book"></i> <span>é˜…è¯»</span></a></li><li><a class="site-page child" href="/games/"><i class="fa-fw fas fa-gamepad"></i> <span>æ¸¸æˆ</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/messageaboard/"><i class="fa-fw fas fa-comment-dots"></i> <span>ç•™è¨€æ¿</span></a></div><div class="menus_item"><a class="site-page" href="/artitalk/"><i class="fa-fw fas fa-cat"></i> <span>è¯´è¯´</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i> <span>å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-address-book"></i> <span>å…³äº</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">ROS-roscpp</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2020-04-28T08:26:40.000Z" title="å‘è¡¨äº 2020-04-28 16:26:40">2020-04-28</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2022-02-10T03:46:06.118Z" title="æ›´æ–°äº 2022-02-10 11:46:06">2022-02-10</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/ros/">ROS</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">6.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>24åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title="ROS-roscpp"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">è¯„è®ºæ•°:</span><a href="/posts/3b2a603b.html#post-comment"><span id="twikoo-count"></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><link rel="stylesheet external nofollow noreferrer" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><div class="note primary flat"><p>ğŸ“– è®¸å¤šå·¥å…·æœ¬è´¨ä¸Šéƒ½æ˜¯åŸºäºROSçš„å®¢æˆ·ç«¯åº“ï¼ˆClient Libararyï¼‰å®ç°çš„ï¼Œæ‰€è°“å®¢æˆ·ç«¯åº“ï¼Œç®€å•çš„ç†è§£å°±æ˜¯ä¸€å¥—æ¥å£ï¼ŒROSä¸ºæˆ‘ä»¬æœºå™¨äººå¼€å‘è€…æä¾›äº†ä¸åŒè¯­è¨€çš„æ¥å£ï¼Œæ¯”å¦‚roscppæ˜¯C++è¯­è¨€ROSæ¥å£ï¼Œrospyæ˜¯pythonè¯­è¨€çš„ROSæ¥å£ï¼Œæˆ‘ä»¬ç›´æ¥è°ƒç”¨å®ƒæ‰€æä¾›çš„å‡½æ•°å°±å¯ä»¥å®ç°topicã€serviceç­‰é€šä¿¡åŠŸèƒ½ã€‚</p></div><hr><h1 id="1-client-libraryä¸roscpp"><a class="markdownIt-Anchor" href="#1-client-libraryä¸roscpp"></a> 1. Client Libraryä¸roscpp</h1><h2 id="11-client-libraryç®€ä»‹"><a class="markdownIt-Anchor" href="#11-client-libraryç®€ä»‹"></a> 1.1. Client Libraryç®€ä»‹</h2><p>ROSä¸ºæœºå™¨äººå¼€å‘è€…ä»¬æä¾›äº†ä¸åŒè¯­è¨€çš„ç¼–ç¨‹æ¥å£ï¼Œæ¯”å¦‚C++æ¥å£å«åšroscppï¼ŒPythonæ¥å£å«åšrospyï¼ŒJavaæ¥å£å«åšrosjavaã€‚å°½ç®¡è¯­è¨€ä¸é€šï¼Œä½†è¿™äº›æ¥å£éƒ½å¯ä»¥ç”¨æ¥åˆ›å»ºtopicã€serviceã€paramï¼Œå®ç°ROSçš„é€šä¿¡åŠŸèƒ½ã€‚Clinet Liraryæœ‰ç‚¹ç±»ä¼¼å¼€å‘ä¸­çš„Helper Classï¼ŒæŠŠä¸€äº›å¸¸ç”¨çš„åŸºæœ¬åŠŸèƒ½åšäº†å°è£…ã€‚</p><p>ç›®å‰ROSæ”¯æŒçš„Clinet LibraryåŒ…æ‹¬ï¼š</p><table><thead><tr><th style="text-align:center">Client Library</th><th style="text-align:center">ä»‹ç»</th></tr></thead><tbody><tr><td style="text-align:center">roscpp</td><td style="text-align:center">ROSçš„C++åº“ï¼Œæ˜¯ç›®å‰æœ€å¹¿æ³›åº”ç”¨çš„ROSå®¢æˆ·ç«¯åº“ï¼Œæ‰§è¡Œæ•ˆç‡é«˜</td></tr><tr><td style="text-align:center">rospy</td><td style="text-align:center">ROSçš„Pythonåº“ï¼Œå¼€å‘æ•ˆç‡é«˜ï¼Œé€šå¸¸ç”¨åœ¨å¯¹è¿è¡Œæ—¶é—´æ²¡æœ‰å¤ªå¤§è¦æ±‚çš„åœºåˆï¼Œä¾‹å¦‚é…ç½®ã€åˆå§‹åŒ–ç­‰æ“ä½œ</td></tr><tr><td style="text-align:center">roslisp</td><td style="text-align:center">ROSçš„LISPåº“</td></tr><tr><td style="text-align:center">roscs</td><td style="text-align:center">Mono/.NET.åº“ï¼Œå¯ç”¨ä»»ä½•Mono/.NETè¯­è¨€ï¼ŒåŒ…æ‹¬C#ï¼ŒIron Pythonï¼Œ Iron Rubyç­‰</td></tr><tr><td style="text-align:center">rosgo</td><td style="text-align:center">ROS Goè¯­è¨€åº“</td></tr><tr><td style="text-align:center">rosjava</td><td style="text-align:center">ROS Javaè¯­è¨€åº“</td></tr><tr><td style="text-align:center">rosnodejs</td><td style="text-align:center">Javascriptå®¢æˆ·ç«¯åº“</td></tr><tr><td style="text-align:center">â€¦</td><td style="text-align:center">â€¦</td></tr></tbody></table><p>ç›®å‰æœ€å¸¸ç”¨çš„åªæœ‰roscppå’Œrospyï¼Œè€Œå…¶ä½™çš„è¯­è¨€ç‰ˆæœ¬åŸºæœ¬éƒ½è¿˜æ˜¯æµ‹è¯•ç‰ˆã€‚</p><p>ä»å¼€å‘å®¢æˆ·ç«¯åº“çš„è§’åº¦çœ‹ï¼Œä¸€ä¸ªå®¢æˆ·ç«¯åº“ï¼Œè‡³å°‘éœ€è¦èƒ½å¤ŸåŒ…æ‹¬masteræ³¨å†Œã€åç§°ç®¡ç†ã€æ¶ˆæ¯æ”¶å‘ç­‰åŠŸèƒ½ã€‚è¿™æ ·æ‰èƒ½ç»™å¼€å‘è€…æä¾›å¯¹ROSé€šä¿¡æ¶æ„è¿›è¡Œé…ç½®çš„æ–¹æ³•ã€‚</p><p>æ•´ä¸ªROSåŒ…æ‹¬çš„packageså¦‚ä¸‹ï¼Œä½ å¯ä»¥çœ‹åˆ°roscppã€rospyå¤„äºä»€ä¹ˆä½ç½®ã€‚</p><p><img src="/img/private/loading-4.gif" data-lazy-src="https://sychaichangkun.gitbooks.io/ros-tutorial-icourse163/content/pics/ros_pkgs.png" alt="img"></p><h2 id="12-roscpp"><a class="markdownIt-Anchor" href="#12-roscpp"></a> 1.2. roscpp</h2><p>roscppä½äº<code>/opt/ros/kinetic</code>ä¹‹ä¸‹ï¼Œç”¨C<ins>å®ç°äº†ROSé€šä¿¡ã€‚åœ¨ROSä¸­ï¼ŒC</ins>çš„ä»£ç æ˜¯é€šè¿‡catkinè¿™ä¸ªç¼–è¯‘ç³»ç»Ÿï¼ˆæ‰©å±•çš„CMakeï¼‰æ¥è¿›è¡Œç¼–è¯‘æ„å»ºçš„ã€‚æ‰€ä»¥ç®€å•åœ°ç†è§£ï¼Œä½ ä¹Ÿå¯ä»¥æŠŠroscppå°±å½“ä½œä¸ºä¸€ä¸ªC++çš„åº“ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªCMakeå·¥ç¨‹ï¼Œåœ¨å…¶ä¸­includeäº†roscppç­‰ROSçš„librariesï¼Œè¿™æ ·å°±å¯ä»¥åœ¨å·¥ç¨‹ä¸­ä½¿ç”¨ROSæä¾›çš„å‡½æ•°äº†ã€‚</p><p>é€šå¸¸æˆ‘ä»¬è¦è°ƒç”¨ROSçš„C++æ¥å£ï¼Œé¦–å…ˆå°±éœ€è¦<code>#include</code>ã€‚</p><p>roscppçš„ä¸»è¦éƒ¨åˆ†åŒ…æ‹¬ï¼š</p><ul><li>ros::init() : è§£æä¼ å…¥çš„ROSå‚æ•°ï¼Œåˆ›å»ºnodeç¬¬ä¸€æ­¥éœ€è¦ç”¨åˆ°çš„å‡½æ•°</li><li>ros::NodeHandle : å’Œtopicã€serviceã€paramç­‰äº¤äº’çš„å…¬å…±æ¥å£</li><li>ros::master : åŒ…å«ä»masteræŸ¥è¯¢ä¿¡æ¯çš„å‡½æ•°</li><li>ros::this_nodeï¼šåŒ…å«æŸ¥è¯¢è¿™ä¸ªè¿›ç¨‹(node)çš„å‡½æ•°</li><li>ros::serviceï¼šåŒ…å«æŸ¥è¯¢æœåŠ¡çš„å‡½æ•°</li><li>ros::paramï¼šåŒ…å«æŸ¥è¯¢å‚æ•°æœåŠ¡å™¨çš„å‡½æ•°ï¼Œè€Œä¸éœ€è¦ç”¨åˆ°NodeHandle</li><li>ros::namesï¼šåŒ…å«å¤„ç†ROSå›¾èµ„æºåç§°çš„å‡½æ•°</li></ul><p>å…·ä½“å¯è§ï¼š<a target="_blank" rel="noopener external nofollow noreferrer" href="http://docs.ros.org/api/roscpp/html/index.html">http://docs.ros.org/api/roscpp/html/index.html</a></p><p>ä»¥ä¸ŠåŠŸèƒ½å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š</p><ul><li>Initialization and Shutdown åˆå§‹ä¸å…³é—­</li><li>Topics è¯é¢˜</li><li>Services æœåŠ¡</li><li>Parameter Server å‚æ•°æœåŠ¡å™¨</li><li>Timers å®šæ—¶å™¨</li><li>NodeHandles èŠ‚ç‚¹å¥æŸ„</li><li>Callbacks and Spinning å›è°ƒå’Œè‡ªæ—‹ï¼ˆæˆ–è€…ç¿»è¯‘å«è½®è¯¢ï¼Ÿï¼‰</li><li>Logging æ—¥å¿—</li><li>Names and Node Information åç§°ç®¡ç†</li><li>Time æ—¶é’Ÿ</li><li>Exception å¼‚å¸¸</li></ul><p>çœ‹åˆ°è¿™ä¹ˆå¤šæ¥å£ï¼Œåƒä¸‡åˆ«è§‰å¾—å¤æ‚ï¼Œæˆ‘ä»¬æ—¥å¸¸å¼€å‘å¹¶ä¸ä¼šç”¨åˆ°æ‰€æœ‰çš„åŠŸèƒ½ï¼Œä½ åªéœ€å¯¹è¦æœ‰ä¸€äº›å°è±¡ï¼ŒæŒæ¡å‡ ä¸ªæ¯”è¾ƒå¸¸è§å’Œé‡è¦çš„ç”¨æ³•å°±è¶³å¤Ÿäº†ã€‚ä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç»å…³é”®çš„ç”¨æ³•ã€‚</p><h1 id="2-èŠ‚ç‚¹åˆå§‹-å…³é—­ä»¥åŠnodehandle"><a class="markdownIt-Anchor" href="#2-èŠ‚ç‚¹åˆå§‹-å…³é—­ä»¥åŠnodehandle"></a> 2. èŠ‚ç‚¹åˆå§‹ã€å…³é—­ä»¥åŠNodeHandle</h1><p>å½“æ‰§è¡Œä¸€ä¸ªROSç¨‹åºï¼Œå°±è¢«åŠ è½½åˆ°äº†å†…å­˜ä¸­ï¼Œå°±æˆä¸ºäº†ä¸€ä¸ªè¿›ç¨‹ï¼Œåœ¨ROSé‡Œå«åšèŠ‚ç‚¹ã€‚æ¯ä¸€ä¸ªROSçš„èŠ‚ç‚¹å°½ç®¡åŠŸèƒ½ä¸åŒï¼Œä½†éƒ½æœ‰å¿…ä¸å¯å°‘çš„ä¸€äº›æ­¥éª¤ï¼Œæ¯”å¦‚åˆå§‹åŒ–ã€é”€æ¯ï¼Œéœ€è¦é€šè¡Œçš„åœºæ™¯é€šå¸¸éƒ½è¿˜éœ€è¦èŠ‚ç‚¹çš„å¥æŸ„ã€‚ è¿™ä¸€èŠ‚æˆ‘ä»¬æ¥å­¦ä¹ Nodeæœ€åŸºæœ¬çš„ä¸€äº›æ“ä½œã€‚</p><h2 id="21-åˆå§‹åŒ–èŠ‚ç‚¹"><a class="markdownIt-Anchor" href="#21-åˆå§‹åŒ–èŠ‚ç‚¹"></a> 2.1. åˆå§‹åŒ–èŠ‚ç‚¹</h2><p>å¯¹äºä¸€ä¸ªC<ins>å†™çš„ROSç¨‹åºï¼Œä¹‹æ‰€ä»¥å®ƒåŒºåˆ«äºæ™®é€šC</ins>ç¨‹åºï¼Œæ˜¯å› ä¸ºä»£ç ä¸­åšäº†ä¸¤å±‚å·¥ä½œï¼š</p><ol><li>è°ƒç”¨äº†<code>ros::init()</code>å‡½æ•°ï¼Œä»è€Œåˆå§‹åŒ–èŠ‚ç‚¹çš„åç§°å’Œå…¶ä»–ä¿¡æ¯ï¼Œä¸€èˆ¬æˆ‘ä»¬ROSç¨‹åºä¸€å¼€å§‹éƒ½ä¼šä»¥è¿™ç§æ–¹å¼å¼€å§‹ã€‚</li><li>åˆ›å»º<code>ros::NodeHandle</code>å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯èŠ‚ç‚¹çš„å¥æŸ„ï¼Œå®ƒå¯ä»¥ç”¨æ¥åˆ›å»ºPublisherã€Subscriberä»¥åŠåšå…¶ä»–äº‹æƒ…ã€‚</li></ol><p>å¥æŸ„(Handle)è¿™ä¸ªæ¦‚å¿µå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªâ€œæŠŠæ‰‹â€ï¼Œä½ æ¡ä½äº†é—¨æŠŠæ‰‹ï¼Œå°±å¯ä»¥å¾ˆå®¹æ˜“æŠŠæ•´æ‰‡é—¨æ‹‰å¼€ï¼Œè€Œä¸å¿…å…³å¿ƒé—¨æ˜¯ä»€ä¹ˆæ ·å­ã€‚NodeHandleå°±æ˜¯å¯¹èŠ‚ç‚¹èµ„æºçš„æè¿°ï¼Œæœ‰äº†å®ƒä½ å°±å¯ä»¥æ“ä½œè¿™ä¸ªèŠ‚ç‚¹äº†ï¼Œæ¯”å¦‚ä¸ºç¨‹åºæä¾›æœåŠ¡ã€ç›‘å¬æŸä¸ªtopicä¸Šçš„æ¶ˆæ¯ã€è®¿é—®å’Œä¿®æ”¹paramç­‰ç­‰ã€‚</p><h2 id="22-å…³é—­èŠ‚ç‚¹"><a class="markdownIt-Anchor" href="#22-å…³é—­èŠ‚ç‚¹"></a> 2.2. å…³é—­èŠ‚ç‚¹</h2><p>é€šå¸¸æˆ‘ä»¬è¦å…³é—­ä¸€ä¸ªèŠ‚ç‚¹å¯ä»¥ç›´æ¥åœ¨ç»ˆç«¯ä¸ŠæŒ‰<code>Ctrl</code>+<code>C</code>ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è§¦å‘SIGINTå¥æŸ„æ¥å…³é—­è¿™ä¸ªè¿›ç¨‹ã€‚ ä½ ä¹Ÿå¯ä»¥é€šè¿‡è°ƒç”¨<code>ros::shutdown()</code>æ¥æ‰‹åŠ¨å…³é—­èŠ‚ç‚¹ï¼Œä½†é€šå¸¸æˆ‘ä»¬å¾ˆå°‘è¿™æ ·åšã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªèŠ‚ç‚¹åˆå§‹åŒ–ã€å…³é—­çš„ä¾‹å­ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;ros/ros.h&gt;</span><br><span class="line">int main(int argc, char** argv)</span><br><span class="line">&#123;</span><br><span class="line">    ros::init(argc, argv, &quot;your_node_name&quot;); </span><br><span class="line">    ros::NodeHandle nh;</span><br><span class="line">    //....èŠ‚ç‚¹åŠŸèƒ½</span><br><span class="line">    //....</span><br><span class="line">    ros::spin();//ç”¨äºè§¦å‘topicã€serviceçš„å“åº”é˜Ÿåˆ—</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç æ˜¯æœ€å¸¸è§çš„ä¸€ä¸ªROSç¨‹åºçš„æ‰§è¡Œæ­¥éª¤ï¼Œé€šå¸¸è¦å¯åŠ¨èŠ‚ç‚¹ï¼Œè·å–å¥æŸ„ï¼Œè€Œå…³é—­çš„å·¥ä½œç³»ç»Ÿè‡ªåŠ¨å¸®æˆ‘ä»¬å®Œæˆï¼Œå¦‚æœæœ‰ç‰¹æ®Šéœ€è¦ä½ ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ã€‚ä½ å¯èƒ½å¾ˆå…³å¿ƒå¥æŸ„å¯ä»¥ç”¨æ¥åšäº›ä»€ä¹ˆï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹çœ‹NodeHandleå¸¸ç”¨çš„æˆå‘˜å‡½æ•°ã€‚</p><h2 id="23-nodehandleå¸¸ç”¨æˆå‘˜å‡½æ•°"><a class="markdownIt-Anchor" href="#23-nodehandleå¸¸ç”¨æˆå‘˜å‡½æ•°"></a> 2.3. NodeHandleå¸¸ç”¨æˆå‘˜å‡½æ•°</h2><p>NodeHandleæ˜¯Nodeçš„å¥æŸ„ï¼Œç”¨æ¥å¯¹å½“å‰èŠ‚ç‚¹è¿›è¡Œå„ç§æ“ä½œã€‚åœ¨ROSä¸­ï¼ŒNodeHandleæ˜¯ä¸€ä¸ªå®šä¹‰å¥½çš„ç±»ï¼Œé€šè¿‡<code>include</code>ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºè¿™ä¸ªç±»ï¼Œä»¥åŠä½¿ç”¨å®ƒçš„æˆå‘˜å‡½æ•°ã€‚</p><p>NodeHandleå¸¸ç”¨æˆå‘˜å‡½æ•°åŒ…æ‹¬ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åˆ›å»ºè¯é¢˜çš„publisher </span></span><br><span class="line"><span class="function">ros::Publisher <span class="title">advertise</span><span class="params">(<span class="keyword">const</span> string &amp;topic, <span class="keyword">uint32_t</span> queue_size, <span class="keyword">bool</span> latch=<span class="literal">false</span>)</span></span>; </span><br><span class="line"><span class="comment">//ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå‘å¸ƒè¯é¢˜çš„åç§°</span></span><br><span class="line"><span class="comment">//ç¬¬äºŒä¸ªæ˜¯æ¶ˆæ¯é˜Ÿåˆ—çš„æœ€å¤§é•¿åº¦ï¼Œå¦‚æœå‘å¸ƒçš„æ¶ˆæ¯è¶…è¿‡è¿™ä¸ªé•¿åº¦è€Œæ²¡æœ‰è¢«æ¥æ”¶ï¼Œé‚£ä¹ˆå°±çš„æ¶ˆæ¯å°±ä¼šå‡ºé˜Ÿã€‚é€šå¸¸è®¾ä¸ºä¸€ä¸ªè¾ƒå°çš„æ•°å³å¯ã€‚</span></span><br><span class="line"><span class="comment">//ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯æ˜¯å¦é”å­˜ã€‚æŸäº›è¯é¢˜å¹¶ä¸æ˜¯ä¼šä»¥æŸä¸ªé¢‘ç‡å‘å¸ƒï¼Œæ¯”å¦‚/mapè¿™ä¸ªtopicï¼Œåªæœ‰åœ¨åˆæ¬¡è®¢é˜…æˆ–è€…åœ°å›¾æ›´æ–°è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œ/mapæ‰ä¼šå‘å¸ƒæ¶ˆæ¯ã€‚è¿™é‡Œå°±ç”¨åˆ°äº†é”å­˜ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºè¯é¢˜çš„subscriber</span></span><br><span class="line"><span class="function">ros::Subscriber <span class="title">subscribe</span><span class="params">(<span class="keyword">const</span> string &amp;topic, <span class="keyword">uint32_t</span> queue_size, <span class="keyword">void</span>(*)(M))</span></span>;</span><br><span class="line"><span class="comment">//ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è®¢é˜…è¯é¢˜çš„åç§°</span></span><br><span class="line"><span class="comment">//ç¬¬äºŒä¸ªå‚æ•°æ˜¯è®¢é˜…é˜Ÿåˆ—çš„é•¿åº¦ï¼Œå¦‚æœå—åˆ°çš„æ¶ˆæ¯éƒ½æ²¡æ¥å¾—åŠå¤„ç†ï¼Œé‚£ä¹ˆæ–°æ¶ˆæ¯å…¥é˜Ÿï¼Œå°±æ¶ˆæ¯å°±ä¼šå‡ºé˜Ÿ</span></span><br><span class="line"><span class="comment">//ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯å›è°ƒå‡½æ•°æŒ‡é’ˆï¼ŒæŒ‡å‘å›è°ƒå‡½æ•°æ¥å¤„ç†æ¥æ”¶åˆ°çš„æ¶ˆæ¯</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºæœåŠ¡çš„serverï¼Œæä¾›æœåŠ¡</span></span><br><span class="line"><span class="function">ros::ServiceServer <span class="title">advertiseService</span><span class="params">(<span class="keyword">const</span> string &amp;service, <span class="keyword">bool</span>(*srv_func)(Mreq &amp;, Mres &amp;))</span></span>; </span><br><span class="line"><span class="comment">//ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯serviceåç§°</span></span><br><span class="line"><span class="comment">//ç¬¬äºŒä¸ªå‚æ•°æ˜¯æœåŠ¡å‡½æ•°çš„æŒ‡é’ˆï¼ŒæŒ‡å‘æœåŠ¡å‡½æ•°ã€‚æŒ‡å‘çš„å‡½æ•°åº”è¯¥æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ¥å—è¯·æ±‚å’Œå“åº”ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºæœåŠ¡çš„client</span></span><br><span class="line"><span class="function">ros::ServiceClient <span class="title">serviceClient</span><span class="params">(<span class="keyword">const</span> string &amp;service_name, <span class="keyword">bool</span> persistent=<span class="literal">false</span>)</span></span>; </span><br><span class="line"><span class="comment">//ç¬¬ä¸€ä¸ªå‡½æ•°å¼serviceåç§°</span></span><br><span class="line"><span class="comment">//ç¬¬äºŒä¸ªå‚æ•°ç”¨äºè®¾ç½®æœåŠ¡çš„è¿æ¥æ˜¯å¦æŒç»­ï¼Œå¦‚æœä¸ºtrueï¼Œclientå°†ä¼šä¿æŒä¸è¿œç¨‹ä¸»æœºçš„è¿æ¥ï¼Œè¿™æ ·åç»­çš„è¯·æ±‚ä¼šå¿«ä¸€äº›ã€‚é€šå¸¸æˆ‘ä»¬è®¾ä¸ºflase</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æŸ¥è¯¢æŸä¸ªå‚æ•°çš„å€¼</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">getParam</span><span class="params">(<span class="keyword">const</span> string &amp;key, std::string &amp;s)</span></span>; </span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">getParam</span> <span class="params">(<span class="keyword">const</span> std::string &amp;key, <span class="keyword">double</span> &amp;d)</span> <span class="keyword">const</span>ï¼›</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">getParam</span> <span class="params">(<span class="keyword">const</span> std::string &amp;key, <span class="keyword">int</span> &amp;i)</span> <span class="keyword">const</span>ï¼›</span></span><br><span class="line"><span class="function"><span class="comment">//ä»å‚æ•°æœåŠ¡å™¨ä¸Šè·å–keyå¯¹åº”çš„å€¼ï¼Œå·²é‡è½½äº†å¤šä¸ªç±»å‹</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="comment">//ç»™å‚æ•°èµ‹å€¼</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setParam</span> <span class="params">(<span class="keyword">const</span> std::string &amp;key, <span class="keyword">const</span> std::string &amp;s)</span> <span class="keyword">const</span>ï¼›</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setParam</span> <span class="params">(<span class="keyword">const</span> std::string &amp;key, <span class="keyword">const</span> <span class="keyword">char</span> *s)</span> <span class="keyword">const</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setParam</span> <span class="params">(<span class="keyword">const</span> std::string &amp;key, <span class="keyword">int</span> i)</span> <span class="keyword">const</span></span>;</span><br><span class="line"><span class="comment">//ç»™keyå¯¹åº”çš„valèµ‹å€¼ï¼Œé‡è½½äº†å¤šä¸ªç±»å‹çš„val</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹å‡ºï¼ŒNodeHandleå¯¹è±¡åœ¨ROS C++ç¨‹åºé‡Œéå¸¸é‡è¦ï¼Œå„ç§ç±»å‹çš„é€šä¿¡éƒ½éœ€è¦ç”¨NodeHandleæ¥åˆ›å»ºå®Œæˆã€‚ ä¸‹é¢æˆ‘ä»¬å…·ä½“æ¥çœ‹topicã€serviceå’Œparamè¿™ä¸‰ç§åŸºæœ¬é€šä¿¡æ–¹å¼çš„å†™æ³•ã€‚</p><h1 id="3-topic-in-roscpp"><a class="markdownIt-Anchor" href="#3-topic-in-roscpp"></a> 3. topic in roscpp</h1><h2 id="31-topicé€šä¿¡"><a class="markdownIt-Anchor" href="#31-topicé€šä¿¡"></a> 3.1. Topicé€šä¿¡</h2><p>Topicæ˜¯ROSé‡Œä¸€ç§å¼‚æ­¥é€šä¿¡çš„æ¨¡å‹ï¼Œä¸€èˆ¬æ˜¯èŠ‚ç‚¹é—´åˆ†å·¥æ˜ç¡®ï¼Œæœ‰çš„åªè´Ÿè´£å‘é€ï¼Œæœ‰çš„åªè´Ÿè´£æ¥æ”¶å¤„ç†ã€‚å¯¹äºç»å¤§å¤šæ•°çš„æœºå™¨äººåº”ç”¨åœºæ™¯ï¼Œæ¯”å¦‚ä¼ æ„Ÿå™¨æ•°æ®æ”¶å‘ï¼Œé€Ÿåº¦æ§åˆ¶æŒ‡ä»¤çš„æ”¶å‘ï¼ŒTopicæ¨¡å‹æ˜¯æœ€é€‚åˆçš„é€šä¿¡æ–¹å¼ã€‚</p><p>ä¸ºäº†è®²æ˜ç™½topicé€šä¿¡çš„ç¼–ç¨‹æ€è·¯ï¼Œæˆ‘ä»¬é¦–å…ˆæ¥çœ‹<code>topic_demo</code>ä¸­çš„ä»£ç ,è¿™ä¸ªç¨‹åºæ˜¯ä¸€ä¸ªæ¶ˆæ¯æ”¶å‘çš„ä¾‹å­ï¼š<strong>è‡ªå®šä¹‰ä¸€ä¸ªç±»å‹ä¸ºgpsçš„æ¶ˆæ¯ï¼ˆåŒ…æ‹¬ä½ç½®xï¼Œyå’Œå·¥ä½œçŠ¶æ€stateä¿¡æ¯ï¼‰ï¼Œä¸€ä¸ªnodeä»¥ä¸€å®šé¢‘ç‡å‘å¸ƒæ¨¡æ‹Ÿçš„gpsæ¶ˆæ¯ï¼Œå¦ä¸€ä¸ªnodeæ¥æ”¶å¹¶å¤„ç†ï¼Œç®—å‡ºåˆ°åŸç‚¹çš„è·ç¦»ã€‚</strong> æºä»£ç è§<code>ROS-Academy-for-Beginners/topic_demo</code></p><h2 id="32-åˆ›å»ºgpsæ¶ˆæ¯"><a class="markdownIt-Anchor" href="#32-åˆ›å»ºgpsæ¶ˆæ¯"></a> 3.2. åˆ›å»ºgpsæ¶ˆæ¯</h2><p>åœ¨ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä¼šç”¨åˆ°è‡ªå®šä¹‰ç±»å‹çš„gpsæ¶ˆæ¯ï¼Œå› æ­¤å°±éœ€è¦æ¥è‡ªå®šä¹‰gpsæ¶ˆæ¯ï¼Œåœ¨msgè·¯å¾„ä¸‹åˆ›å»º<code>gps.msg</code>ï¼š è§<code>topic_demo/msg/gps.msg</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">string state   #å·¥ä½œçŠ¶æ€</span><br><span class="line">float32 x      #xåæ ‡</span><br><span class="line">float32 y      #yåæ ‡</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå°±å®šä¹‰äº†ä¸€ä¸ªgpsç±»å‹çš„æ¶ˆæ¯ï¼Œä½ å¯ä»¥æŠŠå®ƒç†è§£æˆä¸€ä¸ªCè¯­è¨€ä¸­çš„ç»“æ„ä½“ï¼Œç±»ä¼¼äº</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">gps</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    string state;</span><br><span class="line">    float32 x;</span><br><span class="line">    float32 y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ç¨‹åºä¸­å¯¹ä¸€ä¸ªgpsæ¶ˆæ¯è¿›è¡Œåˆ›å»ºä¿®æ”¹çš„æ–¹æ³•å’Œå¯¹ç»“æ„ä½“çš„æ“ä½œä¸€æ ·ã€‚</p><p>å½“ä½ åˆ›å»ºå®Œäº†msgæ–‡ä»¶ï¼Œè®°å¾—ä¿®æ”¹<code>CMakeLists.txt</code>å’Œ<code>package.xml</code>ï¼Œä»è€Œè®©ç³»ç»Ÿèƒ½å¤Ÿç¼–è¯‘è‡ªå®šä¹‰æ¶ˆæ¯ã€‚ åœ¨<code>CMakeLists.txt</code>ä¸­éœ€è¦æ”¹åŠ¨</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">find_package</span>(catkin REQUIRED COMPONENTS</span><br><span class="line">roscpp</span><br><span class="line">std_msgs</span><br><span class="line">message_generation   <span class="comment">#éœ€è¦æ·»åŠ çš„åœ°æ–¹</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">add_message_files(FILES gps.msg)  </span><br><span class="line"><span class="comment">#catkinåœ¨cmakeä¹‹ä¸Šæ–°å¢çš„å‘½ä»¤ï¼ŒæŒ‡å®šä»å“ªä¸ªæ¶ˆæ¯æ–‡ä»¶ç”Ÿæˆ</span></span><br><span class="line"></span><br><span class="line">generate_messages(DEPENDENCIES std_msgs) </span><br><span class="line"><span class="comment">#catkinæ–°å¢çš„å‘½ä»¤ï¼Œç”¨äºç”Ÿæˆæ¶ˆæ¯</span></span><br><span class="line"><span class="comment">#DEPENDENCIESåé¢æŒ‡å®šç”Ÿæˆmsgéœ€è¦ä¾èµ–å…¶ä»–ä»€ä¹ˆæ¶ˆæ¯ï¼Œç”±äºgps.msgç”¨åˆ°äº†flaot32è¿™ç§ROSæ ‡å‡†æ¶ˆæ¯ï¼Œå› æ­¤éœ€è¦å†æŠŠstd_msgsä½œä¸ºä¾èµ–</span></span><br></pre></td></tr></table></figure><p><code>package.xml</code>ä¸­éœ€è¦çš„æ”¹åŠ¨</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build_depend</span>&gt;</span>message_generation<span class="tag">&lt;/<span class="name">build_depend</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">run_depend</span>&gt;</span>message_runtime<span class="tag">&lt;/<span class="name">run_depend</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å½“ä½ å®Œæˆäº†ä»¥ä¸Šæ‰€æœ‰å·¥ä½œï¼Œå°±å¯ä»¥å›åˆ°å·¥ä½œç©ºé—´ï¼Œç„¶åç¼–è¯‘äº†ã€‚ç¼–è¯‘å®Œæˆä¹‹åä¼šåœ¨<code>devel</code>è·¯å¾„ä¸‹ç”Ÿæˆ<code>gps.msg</code>å¯¹åº”çš„å¤´æ–‡ä»¶ï¼Œå¤´æ–‡ä»¶æŒ‰ç…§C++çš„è¯­æ³•è§„åˆ™å®šä¹‰äº†<code>topic_demo::gps</code>ç±»å‹çš„æ•°æ®ã€‚</p><p>è¦åœ¨ä»£ç ä¸­ä½¿ç”¨è‡ªå®šä¹‰æ¶ˆæ¯ç±»å‹ï¼Œåªè¦<code>#include</code>ï¼Œç„¶åå£°æ˜ï¼ŒæŒ‰ç…§å¯¹ç»“æ„ä½“æ“ä½œçš„æ–¹å¼ä¿®æ”¹å†…å®¹å³å¯ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">topic_demo::gps mygpsmsg;</span><br><span class="line">mygpsmsg.x = <span class="number">1.6</span>;</span><br><span class="line">mygpsmsg.y = <span class="number">5.5</span>;</span><br><span class="line">mygpsmsg.state = <span class="string">&quot;working&quot;</span>;</span><br></pre></td></tr></table></figure><h2 id="33-æ¶ˆæ¯å‘å¸ƒèŠ‚ç‚¹"><a class="markdownIt-Anchor" href="#33-æ¶ˆæ¯å‘å¸ƒèŠ‚ç‚¹"></a> 3.3. æ¶ˆæ¯å‘å¸ƒèŠ‚ç‚¹</h2><p>å®šä¹‰å®Œäº†æ¶ˆæ¯ï¼Œå°±å¯ä»¥å¼€å§‹å†™ROSä»£ç äº†ã€‚é€šå¸¸æˆ‘ä»¬ä¼šæŠŠæ¶ˆæ¯æ”¶å‘çš„ä¸¤ç«¯åˆ†æˆä¸¤ä¸ªèŠ‚ç‚¹æ¥å†™ï¼Œä¸€ä¸ªèŠ‚ç‚¹å°±æ˜¯ä¸€ä¸ªå®Œæ•´çš„C++ç¨‹åºã€‚</p><p>è§<code>topic_demo/src/talker.cpp</code></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ros/ros.h&gt;</span>   </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;topic_demo/gps.h&gt;</span>  <span class="comment">//è‡ªå®šä¹‰msgäº§ç”Ÿçš„å¤´æ–‡ä»¶</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  ros::<span class="built_in">init</span>(argc, argv, <span class="string">&quot;talker&quot;</span>);  <span class="comment">//ç”¨äºè§£æROSå‚æ•°ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºæœ¬èŠ‚ç‚¹å</span></span><br><span class="line">  ros::NodeHandle nh;    <span class="comment">//å®ä¾‹åŒ–å¥æŸ„ï¼Œåˆå§‹åŒ–node</span></span><br><span class="line"></span><br><span class="line">  topic_demo::gps msg;  <span class="comment">//è‡ªå®šä¹‰gpsæ¶ˆæ¯å¹¶åˆå§‹åŒ– </span></span><br><span class="line">   ...</span><br><span class="line"></span><br><span class="line">  ros::Publisher pub = nh.advertise&lt;topic_demo::gps&gt;(<span class="string">&quot;gps_info&quot;</span>, <span class="number">1</span>); <span class="comment">//åˆ›å»ºpublisherï¼Œå¾€&quot;gps_info&quot;è¯é¢˜ä¸Šå‘å¸ƒæ¶ˆæ¯</span></span><br><span class="line">  <span class="function">ros::Rate <span class="title">loop_rate</span><span class="params">(<span class="number">1.0</span>)</span></span>;   <span class="comment">//å®šä¹‰å‘å¸ƒçš„é¢‘ç‡ï¼Œ1HZ </span></span><br><span class="line">  <span class="keyword">while</span> (ros::<span class="built_in">ok</span>())   <span class="comment">//å¾ªç¯å‘å¸ƒmsg</span></span><br><span class="line">  &#123;</span><br><span class="line">    ...   <span class="comment">//å¤„ç†msg</span></span><br><span class="line">    pub.<span class="built_in">publish</span>(msg);<span class="comment">//ä»¥1Hzçš„é¢‘ç‡å‘å¸ƒmsg</span></span><br><span class="line">    loop_rate.<span class="built_in">sleep</span>();<span class="comment">//æ ¹æ®å‰é¢çš„å®šä¹‰çš„loop_rate,è®¾ç½®1sçš„æš‚åœ</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœºå™¨äººä¸Šå‡ ä¹æ‰€æœ‰çš„ä¼ æ„Ÿå™¨ï¼Œå‡ ä¹éƒ½æ˜¯æŒ‰ç…§å›ºå®šé¢‘ç‡å‘å¸ƒæ¶ˆæ¯è¿™ç§é€šä¿¡æ–¹å¼æ¥ä¼ è¾“æ•°æ®ï¼Œåªæ˜¯å‘å¸ƒé¢‘ç‡å’Œæ•°æ®ç±»å‹çš„åŒºåˆ«ã€‚</p><h2 id="34-æ¶ˆæ¯æ¥æ”¶èŠ‚ç‚¹"><a class="markdownIt-Anchor" href="#34-æ¶ˆæ¯æ¥æ”¶èŠ‚ç‚¹"></a> 3.4. æ¶ˆæ¯æ¥æ”¶èŠ‚ç‚¹</h2><p>è§<code>topic_demo/src/listener.cpp</code></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ros/ros.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;topic_demo/gps.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;std_msgs/Float32.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">gpsCallback</span><span class="params">(<span class="keyword">const</span> topic_demo::gps::ConstPtr &amp;msg)</span></span></span><br><span class="line"><span class="function"></span>&#123;  </span><br><span class="line">    std_msgs::Float32 distance;  <span class="comment">//è®¡ç®—ç¦»åŸç‚¹(0,0)çš„è·ç¦»</span></span><br><span class="line">    distance.data = <span class="built_in">sqrt</span>(<span class="built_in">pow</span>(msg-&gt;x,<span class="number">2</span>)+<span class="built_in">pow</span>(msg-&gt;y,<span class="number">2</span>));</span><br><span class="line">    <span class="built_in">ROS_INFO</span>(<span class="string">&quot;Listener: Distance to origin = %f, state: %s&quot;</span>,distance.data,msg-&gt;state.<span class="built_in">c_str</span>()); <span class="comment">//è¾“å‡º</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  ros::<span class="built_in">init</span>(argc, argv, <span class="string">&quot;listener&quot;</span>);</span><br><span class="line">  ros::NodeHandle n;</span><br><span class="line">  ros::Subscriber sub = n.<span class="built_in">subscribe</span>(<span class="string">&quot;gps_info&quot;</span>, <span class="number">1</span>, gpsCallback);  <span class="comment">//è®¾ç½®å›è°ƒå‡½æ•°gpsCallback</span></span><br><span class="line">  ros::<span class="built_in">spin</span>(); <span class="comment">//ros::spin()ç”¨äºè°ƒç”¨æ‰€æœ‰å¯è§¦å‘çš„å›è°ƒå‡½æ•°ï¼Œå°†è¿›å…¥å¾ªç¯ï¼Œä¸ä¼šè¿”å›ï¼Œç±»ä¼¼äºåœ¨å¾ªç¯é‡Œåå¤è°ƒç”¨spinOnce() </span></span><br><span class="line">  <span class="comment">//è€Œros::spinOnce()åªä¼šå»è§¦å‘ä¸€æ¬¡</span></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨topicæ¥æ”¶æ–¹ï¼Œæœ‰ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„æ¦‚å¿µï¼Œå°±æ˜¯<strong>å›è°ƒ(CallBack)</strong>ï¼Œåœ¨æœ¬ä¾‹ä¸­ï¼Œå›è°ƒå°±æ˜¯é¢„å…ˆç»™<code>gps_info</code>è¯é¢˜ä¼ æ¥çš„æ¶ˆæ¯å‡†å¤‡ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œä½ äº‹å…ˆå®šä¹‰å¥½å›è°ƒå‡½æ•°çš„æ“ä½œï¼Œæœ¬ä¾‹ä¸­æ˜¯è®¡ç®—åˆ°åŸç‚¹çš„è·ç¦»ã€‚åªæœ‰å½“æœ‰æ¶ˆæ¯æ¥æ—¶ï¼Œå›è°ƒå‡½æ•°æ‰ä¼šè¢«è§¦å‘æ‰§è¡Œã€‚å…·ä½“å»è§¦å‘çš„å‘½ä»¤å°±æ˜¯<code>ros::spin()</code>ï¼Œå®ƒä¼šåå¤çš„æŸ¥çœ‹æœ‰æ²¡æœ‰æ¶ˆæ¯æ¥ï¼Œå¦‚æœæœ‰å°±ä¼šè®©å›è°ƒå‡½æ•°å»å¤„ç†ã€‚</p><p>å› æ­¤åƒä¸‡ä¸è¦è®¤ä¸ºï¼Œåªè¦æŒ‡å®šäº†å›è°ƒå‡½æ•°ï¼Œç³»ç»Ÿå°±å›å»è‡ªåŠ¨è§¦å‘ï¼Œä½ å¿…é¡»<code>ros::spin()</code>æˆ–è€…<code>ros::spinOnce()</code>æ‰èƒ½çœŸæ­£ä½¿å›è°ƒå‡½æ•°ç”Ÿæ•ˆã€‚</p><h2 id="35-cmakeliststxtæ–‡ä»¶ä¿®æ”¹"><a class="markdownIt-Anchor" href="#35-cmakeliststxtæ–‡ä»¶ä¿®æ”¹"></a> 3.5. CMakeLists.txtæ–‡ä»¶ä¿®æ”¹</h2><p>åœ¨<code>CMakeLists.txt</code>æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼Œç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">add_executable</span>(talker src/talker.cpp) <span class="comment">#ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶talker</span></span><br><span class="line"><span class="keyword">add_dependencies</span>(talker topic_demo_generate_messages_cpp)</span><br><span class="line"><span class="comment">#è¡¨æ˜åœ¨ç¼–è¯‘talkerå‰ï¼Œå¿…é¡»å…ˆç”Ÿç¼–è¯‘å®Œæˆè‡ªå®šä¹‰æ¶ˆæ¯</span></span><br><span class="line"><span class="comment">#å¿…é¡»æ·»åŠ add_dependenciesï¼Œå¦åˆ™æ‰¾ä¸åˆ°è‡ªå®šä¹‰çš„msgäº§ç”Ÿçš„å¤´æ–‡ä»¶</span></span><br><span class="line"><span class="comment">#è¡¨æ˜åœ¨ç¼–è¯‘talkerå‰ï¼Œå¿…é¡»å…ˆç”Ÿç¼–è¯‘å®Œæˆè‡ªå®šä¹‰æ¶ˆæ¯</span></span><br><span class="line"><span class="keyword">target_link_libraries</span>(talker <span class="variable">$&#123;catkin_LIBRARIES&#125;</span>) <span class="comment">#é“¾æ¥</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>(listener src/listener.cpp ) <span class="comment">#å£°ç§°å¯æ‰§è¡Œæ–‡ä»¶listener</span></span><br><span class="line"><span class="keyword">add_dependencies</span>(listener topic_demo_generate_messages_cpp)</span><br><span class="line"><span class="keyword">target_link_libraries</span>(listener <span class="variable">$&#123;catkin_LIBRARIES&#125;</span>)<span class="comment">#é“¾æ¥</span></span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šcmakeè¯­å¥å‘Šè¯‰catkinç¼–è¯‘ç³»ç»Ÿå¦‚ä½•å»ç¼–è¯‘ç”Ÿæˆæˆ‘ä»¬çš„ç¨‹åºã€‚è¿™äº›å‘½ä»¤éƒ½æ˜¯æ ‡å‡†çš„cmakeå‘½ä»¤ï¼Œå¦‚æœä¸ç†è§£ï¼Œè¯·æŸ¥é˜…cmakeæ•™ç¨‹ã€‚</p><p>ä¹‹åç»è¿‡<code>catkin_make</code>ï¼Œä¸€ä¸ªè‡ªå®šä¹‰æ¶ˆæ¯+å‘å¸ƒæ¥æ”¶çš„åŸºæœ¬æ¨¡å‹å°±å®Œæˆäº†ã€‚</p><h2 id="36-æ‰©å±•å›è°ƒå‡½æ•°ä¸spinæ–¹æ³•"><a class="markdownIt-Anchor" href="#36-æ‰©å±•å›è°ƒå‡½æ•°ä¸spinæ–¹æ³•"></a> 3.6. æ‰©å±•ï¼šå›è°ƒå‡½æ•°ä¸spin()æ–¹æ³•</h2><p>å›è°ƒå‡½æ•°åœ¨ç¼–ç¨‹ä¸­æ˜¯ä¸€ç§é‡è¦çš„æ–¹æ³•ï¼Œåœ¨ç»´åŸºç™¾ç§‘ä¸Šçš„è§£é‡Šæ˜¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">In computer programming, a callback is any executable code that is passed as an argument to other code, which is expected to call back (execute) the argument at a given time.</span><br></pre></td></tr></table></figure><p>å›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°è¢«ä¼ å…¥åˆ°äº†å¦ä¸€ä¸ªå‡½æ•°ä¸­ï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¼ é€’çš„æ˜¯å‡½æ•°æŒ‡é’ˆï¼‰ï¼Œåœ¨æœªæ¥æŸä¸ªæ—¶åˆ»ï¼ˆå½“æœ‰æ–°çš„messageåˆ°è¾¾ï¼‰ï¼Œå°±ä¼šç«‹å³æ‰§è¡Œã€‚Subscriberæ¥æ”¶åˆ°æ¶ˆæ¯ï¼Œå®é™…ä¸Šæ˜¯å…ˆæŠŠæ¶ˆæ¯æ”¾åˆ°ä¸€ä¸ª<strong>é˜Ÿåˆ—</strong>ä¸­å»ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚é˜Ÿåˆ—çš„é•¿åº¦åœ¨Subscriberæ„å»ºçš„æ—¶å€™è®¾ç½®å¥½äº†ã€‚å½“æœ‰spinå‡½æ•°æ‰§è¡Œï¼Œå°±ä¼šå»å¤„ç†æ¶ˆæ¯é˜Ÿåˆ—ä¸­é˜Ÿé¦–çš„æ¶ˆæ¯ã€‚</p><p><img src="/img/private/loading-4.gif" data-lazy-src="https://sychaichangkun.gitbooks.io/ros-tutorial-icourse163/content/pics/cb_queue.png" alt="img"></p><p>spinå…·ä½“å¤„ç†çš„æ–¹æ³•åˆå¯åˆ†ä¸ºé˜»å¡/éé˜»å¡,å•çº¿ç¨‹/å¤šçº¿ç¨‹ï¼Œåœ¨ROSå‡½æ•°æ¥å£å±‚é¢æˆ‘ä»¬æœ‰4ç§spinçš„æ–¹å¼ï¼š</p><table><thead><tr><th style="text-align:center">spinæ–¹æ³•</th><th style="text-align:center">é˜»å¡</th><th style="text-align:center">çº¿ç¨‹</th></tr></thead><tbody><tr><td style="text-align:center"><code>ros::spin()</code></td><td style="text-align:center">é˜»å¡</td><td style="text-align:center">å•çº¿ç¨‹</td></tr><tr><td style="text-align:center"><code>ros::spinOnce()</code></td><td style="text-align:center">éé˜»å¡</td><td style="text-align:center">å•çº¿ç¨‹</td></tr><tr><td style="text-align:center"><code>ros::MultiThreadedSpin()</code></td><td style="text-align:center">é˜»å¡</td><td style="text-align:center">å¤šçº¿ç¨‹</td></tr><tr><td style="text-align:center"><code>ros::AsyncMultiThreadedSpin()</code></td><td style="text-align:center">éé˜»å¡</td><td style="text-align:center">å¤šçº¿ç¨‹</td></tr></tbody></table><p>é˜»å¡ä¸éé˜»å¡çš„åŒºåˆ«æˆ‘ä»¬å·²ç»è®²äº†ï¼Œä¸‹é¢æ¥çœ‹çœ‹å•çº¿ç¨‹ä¸å¤šçº¿ç¨‹çš„åŒºåˆ«ï¼š</p><p><img src="/img/private/loading-4.gif" data-lazy-src="https://sychaichangkun.gitbooks.io/ros-tutorial-icourse163/content/pics/single-multi-spin.png" alt="img"></p><p>æˆ‘ä»¬å¸¸ç”¨çš„<code>spin()</code>ã€<code>spinOnce()</code>æ˜¯å•ä¸ªçº¿ç¨‹é€ä¸ªå¤„ç†å›è°ƒé˜Ÿåˆ—é‡Œçš„æ•°æ®ã€‚æœ‰äº›åœºåˆéœ€è¦ç”¨åˆ°å¤šçº¿ç¨‹åˆ†åˆ«å¤„ç†ï¼Œåˆ™å¯ä»¥ç”¨åˆ°<code>MultiThreadedSpin()</code>ã€<code>AsyncMultiThreadedSpin()</code>ã€‚</p><h1 id="4-service-in-roscpp"><a class="markdownIt-Anchor" href="#4-service-in-roscpp"></a> 4. service in roscpp</h1><h2 id="41-serviceé€šä¿¡"><a class="markdownIt-Anchor" href="#41-serviceé€šä¿¡"></a> 4.1. Serviceé€šä¿¡</h2><p>Serviceæ˜¯ä¸€ç§è¯·æ±‚-åé¦ˆçš„é€šä¿¡æœºåˆ¶ã€‚è¯·æ±‚çš„ä¸€æ–¹é€šå¸¸è¢«ç§°ä¸ºå®¢æˆ·ç«¯ï¼Œæä¾›æœåŠ¡çš„ä¸€æ–¹å«åšæœåŠ¡å™¨ç«¯ã€‚Serviceæœºåˆ¶ç›¸æ¯”äºTopicçš„ä¸åŒä¹‹å¤„åœ¨äºï¼š</p><ol><li>æ¶ˆæ¯çš„ä¼ è¾“æ˜¯åŒå‘çš„ï¼Œæœ‰åé¦ˆçš„ï¼Œè€Œä¸æ˜¯å•ä¸€çš„æµå‘ã€‚</li><li>æ¶ˆæ¯å¾€å¾€ä¸ä¼šä»¥å›ºå®šé¢‘ç‡ä¼ è¾“ï¼Œä¸è¿ç»­ï¼Œè€Œæ˜¯åœ¨éœ€è¦æ—¶æ‰ä¼šå‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ã€‚</li></ol><p>åœ¨ROSä¸­å¦‚ä½•è¯·æ±‚æˆ–è€…æä¾›ä¸€ä¸ªæœåŠ¡ï¼Œæˆ‘ä»¬æ¥çœ‹<code>service_demo</code>çš„ä»£ç ï¼š<strong>ä¸€ä¸ªèŠ‚ç‚¹å‘å‡ºæœåŠ¡è¯·æ±‚ï¼ˆå§“åï¼Œå¹´é¾„ï¼‰ï¼Œå¦ä¸€ä¸ªèŠ‚ç‚¹è¿›è¡ŒæœåŠ¡å“åº”ï¼Œç­”å¤è¯·æ±‚ã€‚</strong></p><h2 id="42-åˆ›å»ºgreetingæœåŠ¡"><a class="markdownIt-Anchor" href="#42-åˆ›å»ºgreetingæœåŠ¡"></a> 4.2. åˆ›å»ºGreetingæœåŠ¡</h2><p>åˆ›å»º<code>service_demo/Greeting.srv</code>æ–‡ä»¶ï¼Œå†…å®¹åŒ…æ‹¬ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">string name        #çŸ­æ¨ªçº¿ä¸Šè¾¹éƒ¨åˆ†æ˜¯æœåŠ¡è¯·æ±‚çš„æ•°æ®</span><br><span class="line">int32 age          </span><br><span class="line">---                #çŸ­æ¨ªçº¿ä¸‹é¢æ˜¯æœåŠ¡å›ä¼ çš„å†…å®¹ã€‚</span><br><span class="line">string feedback</span><br></pre></td></tr></table></figure><p>srvæ ¼å¼çš„æ–‡ä»¶åˆ›å»ºåï¼Œä¹Ÿéœ€è¦ä¿®æ”¹<code>CMakeLissts.txt</code>,åœ¨å…¶ä¸­åŠ å…¥</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">add_service_files(FILES Greeting.srv)</span><br></pre></td></tr></table></figure><p>å…¶ä½™ä¸æ·»åŠ msgçš„æ”¹åŠ¨ä¸€æ ·ã€‚ç„¶åè¿›è¡Œ<code>catkin_make</code>ï¼Œç³»ç»Ÿå°±ä¼šç”Ÿæˆåœ¨ä»£ç ä¸­å¯ç”¨çš„Greetingç±»å‹ã€‚åœ¨ä»£ç ä¸­ä½¿ç”¨,åªéœ€è¦<code>#include</code>ï¼Œç„¶åå³å¯åˆ›å»ºè¯¥ç±»å‹çš„srvã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">service_demo::Greeting grt;  <span class="comment">//grtåˆ†ä¸ºgrt.requestå’Œgrt.responseä¸¤éƒ¨åˆ†</span></span><br><span class="line">grt.request.name = <span class="string">&quot;HAN&quot;</span>; <span class="comment">//ä¸èƒ½ç”¨grt.nameæˆ–è€…grt.ageæ¥è®¿é—®  </span></span><br><span class="line">grt.request.age = <span class="string">&quot;20&quot;</span>;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>æ–°ç”Ÿæˆçš„Greetingç±»å‹çš„æœåŠ¡ï¼Œå…¶ç»“æ„ä½“çš„é£æ ¼æ›´ä¸ºæ˜æ˜¾ï¼Œå¯ä»¥è¿™ä¹ˆç†è§£ï¼Œä¸€ä¸ªGreetingæœåŠ¡ç»“æ„ä½“ä¸­åµŒå¥—äº†ä¸¤ä¸ªç»“æ„ä½“ï¼Œåˆ†åˆ«æ˜¯è¯·æ±‚å’Œå“åº”ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Greeting</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Request</span></span></span><br><span class="line"><span class="class">    &#123;</span></span><br><span class="line">        string name;</span><br><span class="line">        <span class="keyword">int</span> age;</span><br><span class="line">    &#125;request;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Response</span></span></span><br><span class="line"><span class="class">    &#123;</span></span><br><span class="line">        string feedback;</span><br><span class="line">    &#125;response;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="43-åˆ›å»ºæä¾›æœåŠ¡èŠ‚ç‚¹server"><a class="markdownIt-Anchor" href="#43-åˆ›å»ºæä¾›æœåŠ¡èŠ‚ç‚¹server"></a> 4.3. åˆ›å»ºæä¾›æœåŠ¡èŠ‚ç‚¹(server)</h2><p><code>service_demo/srv/server.cpp</code>å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ros/ros.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;service_demo/Greeting.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">handle_function</span><span class="params">(service_demo::Greeting::Request &amp;req, service_demo::Greeting::Response &amp;res)</span></span>&#123;</span><br><span class="line">    <span class="comment">//æ˜¾ç¤ºè¯·æ±‚ä¿¡æ¯</span></span><br><span class="line">    <span class="built_in">ROS_INFO</span>(â€œRequest from %s with age %dâ€, req.name.<span class="built_in">c_str</span>(), req.age);</span><br><span class="line">    <span class="comment">//å¤„ç†è¯·æ±‚ï¼Œç»“æœå†™å…¥response</span></span><br><span class="line">    res.feedback = â€œHi â€ + req.name + â€œ. Iâ€™m server!â€;</span><br><span class="line">    <span class="comment">//è¿”å›trueï¼Œæ­£ç¡®å¤„ç†äº†è¯·æ±‚</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>** argv)</span></span>&#123;</span><br><span class="line">    ros::<span class="built_in">init</span>(argc, argv, â€œgreetings_serverâ€);        <span class="comment">//è§£æå‚æ•°ï¼Œå‘½åèŠ‚ç‚¹</span></span><br><span class="line">    ros::NodeHandle nh;                       <span class="comment">//åˆ›å»ºå¥æŸ„ï¼Œå®ä¾‹åŒ–node</span></span><br><span class="line">    ros::ServiceServer service = nh.<span class="built_in">advertiseService</span>(â€œgreetingsâ€, handle_function);  <span class="comment">//å†™æ˜æœåŠ¡çš„å¤„ç†å‡½æ•°</span></span><br><span class="line">    ros::<span class="built_in">spin</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä»¥ä¸Šä»£ç ä¸­ï¼ŒæœåŠ¡çš„å¤„ç†æ“ä½œéƒ½å†™åœ¨<code>handle_function()</code>ä¸­ï¼Œå®ƒçš„è¾“å…¥å‚æ•°å°±æ˜¯Greetingçš„Requestå’ŒResponseä¸¤éƒ¨åˆ†ï¼Œè€Œéæ•´ä¸ªGreetingå¯¹è±¡ã€‚é€šå¸¸åœ¨å¤„ç†å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å¯¹Requstæ•°æ®è¿›è¡Œéœ€è¦çš„æ“ä½œï¼Œå°†ç»“æœå†™å…¥åˆ°Responseä¸­ã€‚åœ¨roscppä¸­ï¼Œå¤„ç†å‡½æ•°è¿”å›å€¼æ˜¯boolå‹ï¼Œä¹Ÿå°±æ˜¯æœåŠ¡æ˜¯å¦æˆåŠŸæ‰§è¡Œã€‚ä¸è¦ç†è§£æˆè¾“å…¥Requestï¼Œè¿”å›Responseï¼Œåœ¨rospyä¸­æ˜¯è¿™æ ·çš„ã€‚</p><h2 id="44-åˆ›å»ºæœåŠ¡è¯·æ±‚èŠ‚ç‚¹client"><a class="markdownIt-Anchor" href="#44-åˆ›å»ºæœåŠ¡è¯·æ±‚èŠ‚ç‚¹client"></a> 4.4. åˆ›å»ºæœåŠ¡è¯·æ±‚èŠ‚ç‚¹(client)</h2><p><code>service_demo/srv/client.cpp</code>å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># <span class="meta-keyword">include</span> <span class="meta-string">&quot;ros/ros.h&quot;</span></span></span><br><span class="line"><span class="meta"># <span class="meta-keyword">include</span> <span class="meta-string">&quot;service_demo/Greeting.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ros::<span class="built_in">init</span>(argc, argv, <span class="string">&quot;greetings_client&quot;</span>);<span class="comment">// åˆå§‹åŒ–ï¼ŒèŠ‚ç‚¹å‘½åä¸º&quot;greetings_client&quot;</span></span><br><span class="line">    ros::NodeHandle nh;</span><br><span class="line">    ros::ServiceClient client = nh.serviceClient&lt;service_demo::Greeting&gt;(<span class="string">&quot;greetings&quot;</span>);</span><br><span class="line">    <span class="comment">// å®šä¹‰serviceå®¢æˆ·ç«¯ï¼Œserviceåå­—ä¸ºâ€œgreetingsâ€ï¼Œserviceç±»å‹ä¸ºService_demo</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å®ä¾‹åŒ–srvï¼Œè®¾ç½®å…¶requestæ¶ˆæ¯çš„å†…å®¹ï¼Œè¿™é‡ŒrequeståŒ…å«ä¸¤ä¸ªå˜é‡ï¼Œnameå’Œageï¼Œè§Greeting.srv</span></span><br><span class="line">    service_demo::Greeting srv;</span><br><span class="line">    srv.request.name = <span class="string">&quot;HAN&quot;</span>;</span><br><span class="line">    srv.request.age = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (client.<span class="built_in">call</span>(srv))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// æ³¨æ„æˆ‘ä»¬çš„responseéƒ¨åˆ†ä¸­çš„å†…å®¹åªåŒ…å«ä¸€ä¸ªå˜é‡responseï¼Œå¦ï¼Œæ³¨æ„å°†å…¶è½¬å˜æˆå­—ç¬¦ä¸²</span></span><br><span class="line">        <span class="built_in">ROS_INFO</span>(<span class="string">&quot;Response from server: %s&quot;</span>, srv.response.feedback.<span class="built_in">c_str</span>());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">ROS_ERROR</span>(<span class="string">&quot;Failed to call service Service_demo&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šä»£ç æ¯”è¾ƒå…³é”®çš„åœ°æ–¹æœ‰ä¸¤å¤„ï¼Œä¸€ä¸ªæ˜¯å»ºç«‹ä¸€ä¸ªServiceClientï¼Œå¦ä¸€ä¸ªæ˜¯å¼€å§‹è°ƒç”¨æœåŠ¡ã€‚å»ºç«‹clientéœ€è¦ç”¨<code>nh.serviceClient(&quot;greetings&quot;)</code>ï¼ŒæŒ‡æ˜æœåŠ¡çš„ç±»å‹å’ŒæœåŠ¡çš„åç§°ã€‚è€Œè°ƒç”¨æ—¶å¯ä»¥ç›´æ¥ç”¨<code>client.call(srv)</code>ï¼Œè¿”å›ç»“æœä¸æ˜¯responseï¼Œè€Œæ˜¯æ˜¯å¦æˆåŠŸè°ƒç”¨è¿œç¨‹æœåŠ¡ã€‚</p><p><code>CMakeLists.txt</code>å’Œ<code>pacakge.xml</code>ä¿®æ”¹æ–¹æ³•å’Œ<code>topic_demo</code>ä¿®æ”¹æ–¹æ³•ç±»ä¼¼ï¼Œä¸å†èµ˜è¿°ã€‚</p><h1 id="5-param-in-roscpp"><a class="markdownIt-Anchor" href="#5-param-in-roscpp"></a> 5. param in roscpp</h1><h2 id="51-parameter-server"><a class="markdownIt-Anchor" href="#51-parameter-server"></a> 5.1. Parameter Server</h2><p>ä¸¥æ ¼æ¥è¯´ï¼Œparamå¹¶ä¸èƒ½ç§°ä½œä¸€ç§é€šä¿¡æ–¹å¼ï¼Œå› ä¸ºå®ƒå¾€å¾€åªæ˜¯ç”¨æ¥å­˜å‚¨ä¸€äº›é™æ€çš„è®¾ç½®ï¼Œè€Œä¸æ˜¯åŠ¨æ€å˜åŒ–çš„ã€‚æ‰€ä»¥å…³äºparamçš„æ“ä½œéå¸¸è½»å·§ï¼Œéå¸¸ç®€å•ã€‚ å…³äºparamçš„APIï¼Œroscppä¸ºæˆ‘ä»¬æä¾›äº†ä¸¤å¥—ï¼Œä¸€å¥—æ˜¯æ”¾åœ¨<code>ros::param</code>namespaceä¸‹ï¼Œå¦ä¸€å¥—æ˜¯åœ¨<code>ros::NodeHandle</code>ä¸‹ï¼Œè¿™ä¸¤å¥—APIçš„æ“ä½œå®Œå…¨ä¸€æ ·ï¼Œç”¨å“ªä¸€ä¸ªå–å†³äºä½ çš„ä¹ æƒ¯ã€‚</p><h2 id="52-param_demo"><a class="markdownIt-Anchor" href="#52-param_demo"></a> 5.2. param_demo</h2><p>æˆ‘ä»¬æ¥çœ‹çœ‹åœ¨C++ä¸­å¦‚ä½•è¿›è¡Œparam_demoçš„æ“ä½œï¼Œ<code>param_demo/param.cpp</code>æ–‡ä»¶ï¼Œå†…å®¹åŒ…æ‹¬ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;ros/ros.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span>&#123;</span><br><span class="line">    ros::<span class="built_in">init</span>(argc, argv, <span class="string">&quot;param_demo&quot;</span>);</span><br><span class="line">    ros::NodeHandle nh;</span><br><span class="line">    <span class="keyword">int</span> parameter1, parameter2, parameter3, parameter4, parameter5;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Get Paramçš„ä¸‰ç§æ–¹æ³•</span></span><br><span class="line">    <span class="comment">//â‘  ros::param::get()è·å–å‚æ•°â€œparam1â€çš„valueï¼Œå†™å…¥åˆ°parameter1ä¸Š</span></span><br><span class="line">    <span class="keyword">bool</span> ifget1 = ros::param::<span class="built_in">get</span>(<span class="string">&quot;param1&quot;</span>, parameter1);</span><br><span class="line">    <span class="comment">//â‘¡ ros::NodeHandle::getParam()è·å–å‚æ•°ï¼Œä¸â‘ ä½œç”¨ç›¸åŒ</span></span><br><span class="line">    <span class="keyword">bool</span> ifget2 = nh.<span class="built_in">getParam</span>(<span class="string">&quot;param2&quot;</span>,parameter2);</span><br><span class="line">    <span class="comment">//â‘¢ ros::NodeHandle::param()ç±»ä¼¼äºâ‘ å’Œâ‘¡</span></span><br><span class="line">    <span class="comment">//ä½†å¦‚æœgetä¸åˆ°æŒ‡å®šçš„paramï¼Œå®ƒå¯ä»¥ç»™paramæŒ‡å®šä¸€ä¸ªé»˜è®¤å€¼(å¦‚33333)</span></span><br><span class="line">        nh.<span class="built_in">param</span>(<span class="string">&quot;param3&quot;</span>, parameter3, <span class="number">33333</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(ifget1) <span class="comment">//paramæ˜¯å¦å–å¾—</span></span><br><span class="line">        ...</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Set Param</span></span><br><span class="line">    <span class="comment">//â‘  ros::param::set()è®¾ç½®å‚æ•°</span></span><br><span class="line">    parameter4 = <span class="number">4</span>;</span><br><span class="line">    ros::param::<span class="built_in">set</span>(<span class="string">&quot;param4&quot;</span>, parameter4);</span><br><span class="line">    <span class="comment">//â‘¡ ros::NodeHandle::setParam()è®¾ç½®å‚æ•°</span></span><br><span class="line">    parameter5 = <span class="number">5</span>;</span><br><span class="line">    nh.<span class="built_in">setParam</span>(<span class="string">&quot;param5&quot;</span>,parameter5);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Check Param</span></span><br><span class="line">    <span class="comment">//â‘  ros::NodeHandle::hasParam()</span></span><br><span class="line">    <span class="keyword">bool</span> ifparam5 = nh.<span class="built_in">hasParam</span>(<span class="string">&quot;param5&quot;</span>);</span><br><span class="line">    <span class="comment">//â‘¡ ros::param::has()</span></span><br><span class="line">    <span class="keyword">bool</span> ifparam6 = ros::param::<span class="built_in">has</span>(<span class="string">&quot;param6&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Delete Param</span></span><br><span class="line">    <span class="comment">//â‘  ros::NodeHandle::deleteParam()</span></span><br><span class="line">    <span class="keyword">bool</span> ifdeleted5 = nh.<span class="built_in">deleteParam</span>(<span class="string">&quot;param5&quot;</span>);</span><br><span class="line">    <span class="comment">//â‘¡ ros::param::del()</span></span><br><span class="line">    <span class="keyword">bool</span> ifdeleted6 = ros::param::<span class="built_in">del</span>(<span class="string">&quot;param6&quot;</span>);</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šæ˜¯roscppä¸­å¯¹paramè¿›è¡Œå¢åˆ æ”¹æŸ¥æ‰€æœ‰æ“ä½œçš„æ–¹æ³•ï¼Œéå¸¸ç›´è§‚ã€‚</p><h2 id="53-param_demoä¸­çš„launchæ–‡ä»¶"><a class="markdownIt-Anchor" href="#53-param_demoä¸­çš„launchæ–‡ä»¶"></a> 5.3. param_demoä¸­çš„launchæ–‡ä»¶</h2><p>å®é™…é¡¹ç›®ä¸­æˆ‘ä»¬å¯¹å‚æ•°è¿›è¡Œè®¾ç½®ï¼Œå°¤å…¶æ˜¯æ·»åŠ å‚æ•°ï¼Œä¸€èˆ¬éƒ½ä¸æ˜¯åœ¨ç¨‹åºä¸­ï¼Œè€Œæ˜¯åœ¨launchæ–‡ä»¶ä¸­ã€‚å› ä¸ºlaunchæ–‡ä»¶å¯ä»¥æ–¹ä¾¿çš„ä¿®æ”¹å‚æ•°ï¼Œè€Œå†™æˆä»£ç ä¹‹åï¼Œä¿®æ”¹å‚æ•°å¿…é¡»é‡æ–°ç¼–è¯‘ã€‚ å› æ­¤æˆ‘ä»¬ä¼šåœ¨launchæ–‡ä»¶ä¸­å°†paraméƒ½å®šä¹‰å¥½ï¼Œæ¯”å¦‚è¿™ä¸ªdemoæ­£ç¡®çš„æ‰“å¼€æ–¹å¼åº”è¯¥æ˜¯<code>roslaunch param_demo param_demo_cpp.launch</code></p><p><code>param_demo/launch/param_demo_cpp.launch</code>å†…å®¹ä¸ºï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--paramå‚æ•°é…ç½®--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;param1&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;param2&quot;</span> <span class="attr">value</span>=<span class="string">&quot;2&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--rosparamå‚æ•°é…ç½®--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rosparam</span>&gt;</span>   </span><br><span class="line">        param3: 3</span><br><span class="line">        param4: 4</span><br><span class="line">        param5: 5</span><br><span class="line">       <span class="tag">&lt;/<span class="name">rosparam</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ä»¥ä¸Šå†™æ³•å°†å‚æ•°è½¬æˆYAMLæ–‡ä»¶åŠ è½½ï¼Œæ³¨æ„paramå‰é¢å¿…é¡»ä¸ºç©ºæ ¼ï¼Œä¸èƒ½ç”¨Tabï¼Œå¦åˆ™YAMLè§£æé”™è¯¯--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--rosparam file=&quot;$(find robot_sim_demo)/config/xbot2_control.yaml&quot; command=&quot;load&quot; /--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;param_demo&quot;</span> <span class="attr">type</span>=<span class="string">&quot;param_demo&quot;</span> <span class="attr">name</span>=<span class="string">&quot;param_demo&quot;</span> <span class="attr">output</span>=<span class="string">&quot;screen&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡å’Œä¸¤ä¸ªæ ‡ç­¾æˆ‘ä»¬è®¾ç½®å¥½äº†5ä¸ªparamï¼Œä»è€Œåœ¨ä¹‹å‰çš„ä»£ç ä¸­è¿›è¡Œå¢åˆ æ”¹æŸ¥çš„æ“ä½œã€‚</p><h2 id="54-å‘½åç©ºé—´å¯¹paramçš„å½±å“"><a class="markdownIt-Anchor" href="#54-å‘½åç©ºé—´å¯¹paramçš„å½±å“"></a> 5.4. å‘½åç©ºé—´å¯¹paramçš„å½±å“</h2><p>åœ¨å®é™…çš„é¡¹ç›®ä¸­ï¼Œå®ä¾‹åŒ–å¥æŸ„æ—¶ï¼Œç»å¸¸ä¼šçœ‹åˆ°ä¸¤ç§ä¸åŒçš„å†™æ³• ros::NodeHandle n; ros::NodeHandle nh(&quot;~&quot;);` è¿™ä¸¤ç§å†™æ³•æœ‰ä»€ä¹ˆä¸åŒå‘¢ï¼Ÿä»¥æœ¬æ•™å­¦æŠ¥çš„name_demoä¸ºä¾‹ã€‚åœ¨æœ¬èŠ‚launchæ–‡ä»¶å¤¹çš„demo.launchå®šä¹‰ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªå…¨å±€serial ä»–çš„æ•°å€¼æ˜¯5,ä¸€ä¸ªæ˜¯å±€éƒ¨çš„serialï¼Œä»–çš„æ•°å€¼æ˜¯10.</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--å…¨å±€å‚æ•°serial--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;serial&quot;</span> <span class="attr">value</span>=<span class="string">&quot;5&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">node</span> <span class="attr">name</span>=<span class="string">&quot;name_demo&quot;</span> <span class="attr">pkg</span>=<span class="string">&quot;name_demo&quot;</span> <span class="attr">type</span>=<span class="string">&quot;name_demo&quot;</span></span></span><br><span class="line"><span class="tag">   <span class="attr">output</span>=<span class="string">&quot;screen&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å±€éƒ¨å‚æ•°serial--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;serial&quot;</span> <span class="attr">value</span>=<span class="string">&quot;10&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">node</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨name_demo.cppä¸­ï¼Œæˆ‘ä»¬åˆ†åˆ«å°è¯•äº†ï¼Œåˆ©ç”¨å…¨å±€å‘½åç©ºé—´å¥æŸ„æå–å…¨å±€çš„paramå’Œå±€éƒ¨çš„paramï¼Œä»¥åŠåœ¨å±€éƒ¨å‘½åç©ºé—´ä¸‹çš„å¥æŸ„æå–å…¨å±€çš„paramå’Œå±€éƒ¨çš„paramï¼Œè¯¦ç»†çš„ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ros/ros.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> serial_number = <span class="number">-1</span>;<span class="comment">//serial_numberåˆå§‹åŒ–</span></span><br><span class="line">    ros::<span class="built_in">init</span>(argc, argv, <span class="string">&quot;name_demo&quot;</span>);<span class="comment">//nodeåˆå§‹åŒ–</span></span><br><span class="line">    <span class="comment">/*åˆ›å»ºå‘½åç©ºé—´*/</span></span><br><span class="line">    <span class="comment">//n æ˜¯å…¨å±€å‘½åç©ºé—´</span></span><br><span class="line">    ros::NodeHandle n;</span><br><span class="line">    <span class="comment">//nh æ˜¯å±€éƒ¨å‘½åç©ºé—´</span></span><br><span class="line">    <span class="function">ros::NodeHandle <span class="title">nh</span><span class="params">(<span class="string">&quot;~&quot;</span>)</span></span>;</span><br><span class="line">    <span class="comment">/*å…¨å±€å‘½åç©ºé—´ä¸‹çš„Param*/</span></span><br><span class="line">    <span class="built_in">ROS_INFO</span>(<span class="string">&quot;global namespace&quot;</span>);</span><br><span class="line">    <span class="comment">//æå–å…¨å±€å‘½åç©ºé—´ä¸‹çš„å‚æ•°serial</span></span><br><span class="line">    n.<span class="built_in">getParam</span>(<span class="string">&quot;serial&quot;</span>, serial_number);</span><br><span class="line">    <span class="built_in">ROS_INFO</span>(<span class="string">&quot;global_Serial was %d&quot;</span>, serial_number);</span><br><span class="line">    <span class="comment">//æå–å±€éƒ¨å‘½åç©ºé—´ä¸‹çš„å‚æ•°serial</span></span><br><span class="line">    n.<span class="built_in">getParam</span>(<span class="string">&quot;name_demo/serial&quot;</span>, serial_number);<span class="comment">//åœ¨å…¨å±€å‘½åç©ºé—´ä¸‹ï¼Œè¦æå–å±€éƒ¨å‘½åç©ºé—´ä¸‹çš„å‚æ•°ï¼Œéœ€è¦æ·»åŠ node name</span></span><br><span class="line">    <span class="built_in">ROS_INFO</span>(<span class="string">&quot;global_to_local_Serial was %d&quot;</span>, serial_number);</span><br><span class="line">    <span class="comment">/*å±€éƒ¨å‘½åç©ºé—´ä¸‹çš„Param*/</span></span><br><span class="line">    <span class="built_in">ROS_INFO</span>(<span class="string">&quot;local namespace&quot;</span>);</span><br><span class="line">    <span class="comment">//æå–å±€éƒ¨å‘½åç©ºé—´ä¸‹çš„å‚æ•°serial</span></span><br><span class="line">    nh.<span class="built_in">getParam</span>(<span class="string">&quot;serial&quot;</span>, serial_number);</span><br><span class="line">    <span class="built_in">ROS_INFO</span>(<span class="string">&quot;local_Serial was %d&quot;</span>, serial_number);</span><br><span class="line">    <span class="comment">//æå–å…¨å±€å‘½åç©ºé—´ä¸‹çš„å‚æ•°serial</span></span><br><span class="line">    nh.<span class="built_in">getParam</span>(<span class="string">&quot;/serial&quot;</span>, serial_number);<span class="comment">//åœ¨å±€éƒ¨å‘½åç©ºé—´ä¸‹ï¼Œè¦æå–å…¨å±€å‘½åç©ºé—´ä¸‹çš„å‚æ•°ï¼Œéœ€è¦æ·»åŠ â€œ/â€</span></span><br><span class="line">    <span class="built_in">ROS_INFO</span>(<span class="string">&quot;local_to_global_Serial was %d&quot;</span>, serial_number);</span><br><span class="line">    ros::<span class="built_in">spin</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€åçš„ç»“æœ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[ INFO] [1525095241.802257811]: global namespace</span><br><span class="line">[ INFO] [1525095241.803512501]: global_Serial was 5</span><br><span class="line">[ INFO] [1525095241.804515959]: global_to_local_Serial was 10</span><br><span class="line">[ INFO] [1525095241.804550167]: local namespace</span><br><span class="line">[ INFO] [1525095241.805126562]: local_Serial was 10</span><br><span class="line">[ INFO] [1525095241.806137701]: local_to_global_Serial was 5</span><br></pre></td></tr></table></figure><h1 id="6-æ—¶é’Ÿ"><a class="markdownIt-Anchor" href="#6-æ—¶é’Ÿ"></a> 6. æ—¶é’Ÿ</h1><h2 id="61-time-ä¸-duration"><a class="markdownIt-Anchor" href="#61-time-ä¸-duration"></a> 6.1. Time ä¸ Duration</h2><p>ROSé‡Œç»å¸¸ç”¨åˆ°çš„ä¸€ä¸ªåŠŸèƒ½å°±æ˜¯æ—¶é’Ÿï¼Œæ¯”å¦‚è®¡ç®—æœºå™¨äººç§»åŠ¨è·ç¦»ã€è®¾å®šä¸€äº›ç¨‹åºçš„ç­‰å¾…æ—¶é—´ã€è®¾å®šè®¡æ—¶å™¨ç­‰ç­‰ã€‚roscppåŒæ ·ç»™æˆ‘ä»¬æä¾›äº†æ—¶é’Ÿæ–¹é¢çš„æ“ä½œã€‚<br>å…·ä½“æ¥è¯´ï¼Œroscppé‡Œæœ‰ä¸¤ç§æ—¶é—´çš„è¡¨ç¤ºæ–¹æ³•ï¼Œä¸€ç§æ˜¯æ—¶åˆ»ï¼ˆros::Timeï¼‰ï¼Œä¸€ç§æ˜¯æ—¶é•¿ï¼ˆros::Durationï¼‰ã€‚æ— è®ºæ˜¯Timeè¿˜æ˜¯Durationéƒ½å…·æœ‰ç›¸åŒçš„è¡¨ç¤ºæ–¹æ³•ï¼š<br>Â·Â·Â·<br>int32 sec<br>int32 nsec<br>Â·Â·Â·<br>Time/Durationéƒ½ç”±ç§’å’Œçº³ç§’ç»„æˆã€‚ è¦ä½¿ç”¨Timeå’ŒDurationï¼Œéœ€è¦<code>#include</code>å’Œ<code>#include</code></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ros::Time begin = ros::Time::<span class="built_in">now</span>(); <span class="comment">//è·å–å½“å‰æ—¶é—´</span></span><br><span class="line"><span class="function">ros::Time <span class="title">at_some_time1</span><span class="params">(<span class="number">5</span>,<span class="number">20000000</span>)</span></span>;  <span class="comment">//5.2s</span></span><br><span class="line"><span class="function">ros::Time <span class="title">at_some_time2</span><span class="params">(<span class="number">5.2</span>)</span> <span class="comment">//åŒä¸Šï¼Œé‡è½½äº†floatç±»å‹å’Œä¸¤ä¸ªuintç±»å‹çš„æ„é€ å‡½æ•°</span></span></span><br><span class="line"><span class="function">ros::Duration <span class="title">one_hour</span><span class="params">(<span class="number">60</span>*<span class="number">60</span>,<span class="number">0</span>)</span></span>; <span class="comment">//1h</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">double</span> secs1 = at_some_time1.<span class="built_in">toSec</span>();<span class="comment">//å°†Timeè½¬ä¸ºdoubleå‹æ—¶é—´</span></span><br><span class="line"><span class="keyword">double</span> secs2 = one_hour.<span class="built_in">toSec</span>();<span class="comment">//å°†Durationè½¬ä¸ºdoubleå‹æ—¶é—´</span></span><br></pre></td></tr></table></figure><p>Timeå’ŒDurationè¡¨ç¤ºçš„æ¦‚å¿µå¹¶ä¸ç›¸åŒï¼ŒTimeæŒ‡çš„æ˜¯æŸä¸ªæ—¶åˆ»ï¼Œè€ŒDurationæŒ‡çš„æ˜¯æŸä¸ªæ—¶æ®µï¼Œå°½ç®¡ä»–ä»¬çš„æ•°æ®ç»“æ„éƒ½ç›¸åŒï¼Œä½†æ˜¯ç”¨åœ¨ä¸åŒçš„åœºæ™¯ä¸‹ã€‚ ROSä¸ºæˆ‘ä»¬é‡è½½äº†Timeã€Durationç±»å‹ä¹‹é—´çš„åŠ å‡è¿ç®—ï¼Œæ¯”å¦‚:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ros::Time t1 = ros::Time::<span class="built_in">now</span>() - ros::<span class="built_in">Duration</span>(<span class="number">5.5</span>); <span class="comment">//t1æ˜¯5.5så‰çš„æ—¶åˆ»ï¼ŒTimeåŠ å‡Durationè¿”å›éƒ½æ˜¯Time</span></span><br><span class="line">ros::Time t2 = ros::Time::<span class="built_in">now</span>() + ros::<span class="built_in">Duration</span>(<span class="number">3.3</span>);<span class="comment">//t2æ˜¯å½“å‰æ—¶åˆ»å¾€åæ¨3.3sçš„æ—¶åˆ»</span></span><br><span class="line">ros::Duration d1 = t2 - t1;<span class="comment">//ä»t1åˆ°t2çš„æ—¶é•¿ï¼Œä¸¤ä¸ªTimeç›¸å‡è¿”å›Durationç±»å‹</span></span><br><span class="line">ros::Duration d2 = d1 -ros::<span class="built_in">Duration</span>(<span class="number">0</span>,<span class="number">300</span>);<span class="comment">//ä¸¤ä¸ªDurationç›¸å‡ï¼Œè¿˜æ˜¯Duration</span></span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šæ˜¯Timeã€Durationä¹‹é—´çš„åŠ å‡è¿ç®—ï¼Œè¦æ³¨æ„æ²¡æœ‰Time+Timeçš„åšæ³•ã€‚</p><h2 id="62-sleep"><a class="markdownIt-Anchor" href="#62-sleep"></a> 6.2. sleep</h2><p>é€šå¸¸åœ¨æœºå™¨äººä»»åŠ¡æ‰§è¡Œä¸­å¯èƒ½æœ‰éœ€è¦ç­‰å¾…çš„åœºæ™¯ï¼Œè¿™æ—¶å°±è¦ç”¨åˆ°sleepåŠŸèƒ½ï¼Œroscppä¸­æä¾›äº†ä¸¤ç§sleepçš„æ–¹æ³•ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ros::<span class="built_in">Duration</span>(<span class="number">0.5</span>).<span class="built_in">sleep</span>(); <span class="comment">//ç”¨Durationå¯¹è±¡çš„sleepæ–¹æ³•ä¼‘çœ </span></span><br><span class="line"></span><br><span class="line"><span class="function">ros::Rate <span class="title">r</span><span class="params">(<span class="number">10</span>)</span></span>; <span class="comment">//10HZ</span></span><br><span class="line"><span class="keyword">while</span>(ros::<span class="built_in">ok</span>())</span><br><span class="line">&#123;</span><br><span class="line">    r.<span class="built_in">sleep</span>();     </span><br><span class="line">    <span class="comment">//å®šä¹‰å¥½sleepçš„é¢‘ç‡ï¼ŒRateå¯¹è±¡ä¼šè‡ªåŠ¨è®©æ•´ä¸ªå¾ªç¯ä»¥10hzä¼‘çœ ï¼Œå³ä½¿æœ‰ä»»åŠ¡æ‰§è¡Œå ç”¨äº†æ—¶é—´</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="63-timer"><a class="markdownIt-Anchor" href="#63-timer"></a> 6.3. Timer</h2><p>Rateçš„åŠŸèƒ½æ˜¯æŒ‡å®šä¸€ä¸ªé¢‘ç‡ï¼Œè®©æŸäº›åŠ¨ä½œæŒ‰ç…§è¿™ä¸ªé¢‘ç‡æ¥å¾ªç¯æ‰§è¡Œã€‚ä¸ä¹‹ç±»ä¼¼çš„æ˜¯ROSä¸­çš„å®šæ—¶å™¨Timerï¼Œå®ƒæ˜¯é€šè¿‡è®¾å®šå›è°ƒå‡½æ•°å’Œè§¦å‘æ—¶é—´æ¥å®ç°æŸäº›åŠ¨ä½œçš„åå¤æ‰§è¡Œï¼Œåˆ›å»ºæ–¹æ³•å’Œtopicä¸­çš„subscriberå¾ˆåƒã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">callback1</span><span class="params">(<span class="keyword">const</span> ros::TimerEvent&amp;)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="built_in">ROS_INFO</span>(<span class="string">&quot;Callback 1 triggered&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">callback2</span><span class="params">(<span class="keyword">const</span> ros::TimerEvent&amp;)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="built_in">ROS_INFO</span>(<span class="string">&quot;Callback 2 triggered&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  ros::<span class="built_in">init</span>(argc, argv, <span class="string">&quot;talker&quot;</span>);</span><br><span class="line">  ros::NodeHandle n;</span><br><span class="line"></span><br><span class="line">  ros::Timer timer1 = n.<span class="built_in">createTimer</span>(ros::<span class="built_in">Duration</span>(<span class="number">0.1</span>), callback1);  <span class="comment">//timer1æ¯0.1sè§¦å‘ä¸€æ¬¡callback1å‡½æ•°</span></span><br><span class="line">  ros::Timer timer2 = n.<span class="built_in">createTimer</span>(ros::<span class="built_in">Duration</span>(<span class="number">1.0</span>), callback2);  <span class="comment">//timer2æ¯1.0sè§¦å‘ä¸€æ¬¡callback2å‡½æ•°</span></span><br><span class="line"></span><br><span class="line">  ros::<span class="built_in">spin</span>();  <span class="comment">//åƒä¸‡åˆ«å¿˜äº†spinï¼Œåªæœ‰spinäº†æ‰èƒ½çœŸæ­£å»è§¦å‘å›è°ƒå‡½æ•°</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…:</span> <span class="post-copyright-info"><a href="mailto:undefined" rel="external nofollow noreferrer">Malloy Yuan</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥:</span> <span class="post-copyright-info"><a href="https://elec-creator.com/posts/3b2a603b.html">https://elec-creator.com/posts/3b2a603b.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜:</span> <span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="https://elec-creator.com" target="_blank">Malloy Yuan çš„ä¸ªäººåšå®¢</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/ros/">ROS</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/MCUheart/Hexo-blog-data@1.0.2/image/cover/post-cover/ros-cover.jpg" data-sites="facebook,twitter,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> æ‰“èµ</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/MCUheart/Hexo-blog-data@1.0.2/image/donate/wechat.jpg" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" src="/img/private/loading-4.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/MCUheart/Hexo-blog-data@1.0.2/image/donate/wechat.jpg" alt="Wechat"></a><div class="post-qr-code-desc">Wechat</div></li><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/MCUheart/Hexo-blog-data@1.0.2/image/donate/alipay.jpg" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" src="/img/private/loading-4.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/MCUheart/Hexo-blog-data@1.0.2/image/donate/alipay.jpg" alt="Alipay"></a><div class="post-qr-code-desc">Alipay</div></li></ul></div></div><div class="ads-wrap"><ins class="adsbygoogle" style="display:block" data-ad-format="fluid" data-ad-layout-key="-fb+5w+4e-db+86" data-ad-client="ca-pub-6017375467561303" data-ad-slot="3926580292"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/53197a40.html"><img class="prev-cover" src="/img/private/loading-4.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/MCUheart/Hexo-blog-data@1.0.2/image/cover/post-cover/ros-cover.jpg" onerror='onerror=null,src="/img/private/post_img-load-404-1.jpg"' alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">ROS-rospy</div></div></a></div><div class="next-post pull-right"><a href="/posts/28077269.html"><img class="next-cover" src="/img/private/loading-4.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/MCUheart/Hexo-blog-data@1.0.2/image/cover/post-cover/ros-cover.jpg" onerror='onerror=null,src="/img/private/post_img-load-404-1.jpg"' alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">ROS-TFä¸URDF</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><div><a href="/posts/72d3205.html" title="ROS-windowså®‰è£…ROSç¯å¢ƒ"><img class="cover" src="/img/private/loading-4.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/MCUheart/Hexo-blog-data@1.0.2/image/cover/post-cover/ros-cover.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-05-07</div><div class="title">ROS-windowså®‰è£…ROSç¯å¢ƒ</div></div></a></div><div><a href="/posts/15fa7048.html" title="ROS"><img class="cover" src="/img/private/loading-4.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/MCUheart/Hexo-blog-data@1.0.2/image/cover/post-cover/ros-cover.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-03-18</div><div class="title">ROS</div></div></a></div><div><a href="/posts/b74e4547.html" title="ROSå­¦ä¹ è¿‡ç¨‹çš„ç–‘é—®"><img class="cover" src="/img/private/loading-4.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/MCUheart/Hexo-blog-data@1.0.2/image/cover/post-cover/ros-cover.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-07-05</div><div class="title">ROSå­¦ä¹ è¿‡ç¨‹çš„ç–‘é—®</div></div></a></div><div><a href="/posts/59244a47.html" title="ROSå¸¸ç”¨å·¥å…·"><img class="cover" src="/img/private/loading-4.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/MCUheart/Hexo-blog-data@1.0.2/image/cover/post-cover/ros-cover.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-05-03</div><div class="title">ROSå¸¸ç”¨å·¥å…·</div></div></a></div><div><a href="/posts/894a0bcb.html" title="ROSå¸¸ç”¨æŒ‡ä»¤æ•´ç†"><img class="cover" src="/img/private/loading-4.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/MCUheart/Hexo-blog-data@1.0.2/image/cover/post-cover/ros-cover.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-07-05</div><div class="title">ROSå¸¸ç”¨æŒ‡ä»¤æ•´ç†</div></div></a></div><div><a href="/posts/53197a40.html" title="ROS-rospy"><img class="cover" src="/img/private/loading-4.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/MCUheart/Hexo-blog-data@1.0.2/image/cover/post-cover/ros-cover.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-04-28</div><div class="title">ROS-rospy</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i> <span>è¯„è®º</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/private/loading-4.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/MCUheart/Hexo-blog-data@1.0.2/image/portrait/portrait-3.jpg" onerror='this.onerror=null,this.src="/img/private/site_img-load-404-1.gif"' alt="avatar"></div><div class="author-info__name">Malloy Yuan</div><div class="author-info__description">__åœ¨æ€»ç»“ä¸­å‰è¿›,åœ¨åæ€ä¸­æå‡__ä¸ªäººå­¦ä¹ /ç»å†/æ„Ÿæ‚Ÿ/é¡¹ç›®ç»éªŒ/ç”Ÿæ´» ç‚¹æ»´çš„è®°å½•ä¸åˆ†äº«</div></div><div class="card-info-data is-center"><div class="card-info-data-item"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">54</div></a></div><div class="card-info-data-item"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">34</div></a></div><div class="card-info-data-item"><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">37</div></a></div></div><div class="card-info-social-icons is-center"><a class="social-icon" href="http://wpa.qq.com/msgrd?v=3&amp;uin=980298390&amp;site=qq&amp;menu=yes" rel="external nofollow noreferrer" target="_blank" title="QQ"><i class="fab fa-qq"></i></a><a class="social-icon" href="https://weibo.com/u/6622047516" rel="external nofollow noreferrer" target="_blank" title="Weibo"><i class="fab fa-weibo"></i></a><a class="social-icon" href="https://www.zhihu.com/people/yyyml" rel="external nofollow noreferrer" target="_blank" title="Zhihu"><i class="fab fa-zhihu"></i></a><a class="social-icon" href="https://music.163.com/#/user/home?id=19122520" rel="external nofollow noreferrer" target="_blank" title="Neteasy music"><i class="iconfont icon-wangyiyunyinyuemusic1193417easyiconnet"></i></a><a class="social-icon" href="https://space.bilibili.com/432676565" rel="external nofollow noreferrer" target="_blank" title="bilibili"><i class="iconfont icon-bilibili-fill"></i></a><a class="social-icon" href="mailto:yuanml0807@foxmail.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fas fa-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>å…¬å‘Š</span></div><div class="announcement_content">ä¸å®šæ—¶æ›´çš„ä¸ªäººåšå®¢,å–œæ¬¢è®°å¾—æ”¶è—,æ¬¢è¿æ²Ÿé€šäº¤æµ</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-client-library%E4%B8%8Eroscpp"><span class="toc-text">1. Client Libraryä¸roscpp</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#11-client-library%E7%AE%80%E4%BB%8B"><span class="toc-text">1.1. Client Libraryç®€ä»‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-roscpp"><span class="toc-text">1.2. roscpp</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-%E8%8A%82%E7%82%B9%E5%88%9D%E5%A7%8B-%E5%85%B3%E9%97%AD%E4%BB%A5%E5%8F%8Anodehandle"><span class="toc-text">2. èŠ‚ç‚¹åˆå§‹ã€å…³é—­ä»¥åŠNodeHandle</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#21-%E5%88%9D%E5%A7%8B%E5%8C%96%E8%8A%82%E7%82%B9"><span class="toc-text">2.1. åˆå§‹åŒ–èŠ‚ç‚¹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22-%E5%85%B3%E9%97%AD%E8%8A%82%E7%82%B9"><span class="toc-text">2.2. å…³é—­èŠ‚ç‚¹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#23-nodehandle%E5%B8%B8%E7%94%A8%E6%88%90%E5%91%98%E5%87%BD%E6%95%B0"><span class="toc-text">2.3. NodeHandleå¸¸ç”¨æˆå‘˜å‡½æ•°</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-topic-in-roscpp"><span class="toc-text">3. topic in roscpp</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#31-topic%E9%80%9A%E4%BF%A1"><span class="toc-text">3.1. Topicé€šä¿¡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#32-%E5%88%9B%E5%BB%BAgps%E6%B6%88%E6%81%AF"><span class="toc-text">3.2. åˆ›å»ºgpsæ¶ˆæ¯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#33-%E6%B6%88%E6%81%AF%E5%8F%91%E5%B8%83%E8%8A%82%E7%82%B9"><span class="toc-text">3.3. æ¶ˆæ¯å‘å¸ƒèŠ‚ç‚¹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#34-%E6%B6%88%E6%81%AF%E6%8E%A5%E6%94%B6%E8%8A%82%E7%82%B9"><span class="toc-text">3.4. æ¶ˆæ¯æ¥æ”¶èŠ‚ç‚¹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#35-cmakeliststxt%E6%96%87%E4%BB%B6%E4%BF%AE%E6%94%B9"><span class="toc-text">3.5. CMakeLists.txtæ–‡ä»¶ä¿®æ”¹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#36-%E6%89%A9%E5%B1%95%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0%E4%B8%8Espin%E6%96%B9%E6%B3%95"><span class="toc-text">3.6. æ‰©å±•ï¼šå›è°ƒå‡½æ•°ä¸spin()æ–¹æ³•</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-service-in-roscpp"><span class="toc-text">4. service in roscpp</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#41-service%E9%80%9A%E4%BF%A1"><span class="toc-text">4.1. Serviceé€šä¿¡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#42-%E5%88%9B%E5%BB%BAgreeting%E6%9C%8D%E5%8A%A1"><span class="toc-text">4.2. åˆ›å»ºGreetingæœåŠ¡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#43-%E5%88%9B%E5%BB%BA%E6%8F%90%E4%BE%9B%E6%9C%8D%E5%8A%A1%E8%8A%82%E7%82%B9server"><span class="toc-text">4.3. åˆ›å»ºæä¾›æœåŠ¡èŠ‚ç‚¹(server)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#44-%E5%88%9B%E5%BB%BA%E6%9C%8D%E5%8A%A1%E8%AF%B7%E6%B1%82%E8%8A%82%E7%82%B9client"><span class="toc-text">4.4. åˆ›å»ºæœåŠ¡è¯·æ±‚èŠ‚ç‚¹(client)</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-param-in-roscpp"><span class="toc-text">5. param in roscpp</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#51-parameter-server"><span class="toc-text">5.1. Parameter Server</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#52-param_demo"><span class="toc-text">5.2. param_demo</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#53-param_demo%E4%B8%AD%E7%9A%84launch%E6%96%87%E4%BB%B6"><span class="toc-text">5.3. param_demoä¸­çš„launchæ–‡ä»¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#54-%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%E5%AF%B9param%E7%9A%84%E5%BD%B1%E5%93%8D"><span class="toc-text">5.4. å‘½åç©ºé—´å¯¹paramçš„å½±å“</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-%E6%97%B6%E9%92%9F"><span class="toc-text">6. æ—¶é’Ÿ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#61-time-%E4%B8%8E-duration"><span class="toc-text">6.1. Time ä¸ Duration</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#62-sleep"><span class="toc-text">6.2. sleep</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#63-timer"><span class="toc-text">6.3. Timer</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/a8c481ea.html" title="æ€»ç»“åŸºç¡€çŸ¥è¯†ç‚¹é¢(ä¸€) å•ç‰‡æœºç¯‡"><img src="/img/private/loading-4.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/MCUheart/Hexo-blog-data@1.0.2/image/cover/post-cover/summarization-cover.jpg" onerror='this.onerror=null,this.src="/img/private/post_img-load-404-1.jpg"' alt="æ€»ç»“åŸºç¡€çŸ¥è¯†ç‚¹é¢(ä¸€) å•ç‰‡æœºç¯‡"></a><div class="content"><a class="title" href="/posts/a8c481ea.html" title="æ€»ç»“åŸºç¡€çŸ¥è¯†ç‚¹é¢(ä¸€) å•ç‰‡æœºç¯‡">æ€»ç»“åŸºç¡€çŸ¥è¯†ç‚¹é¢(ä¸€) å•ç‰‡æœºç¯‡</a><time datetime="2020-08-08T16:55:00.000Z" title="å‘è¡¨äº 2020-08-09 00:55:00">2020-08-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/3a13bccb.html" title="C++ arrayæ¨¡æ¿ç±»ä½¿ç”¨"><img src="/img/private/loading-4.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/MCUheart/Hexo-blog-data@1.0.2/image/cover/post-cover/c++-cover.jpg" onerror='this.onerror=null,this.src="/img/private/post_img-load-404-1.jpg"' alt="C++ arrayæ¨¡æ¿ç±»ä½¿ç”¨"></a><div class="content"><a class="title" href="/posts/3a13bccb.html" title="C++ arrayæ¨¡æ¿ç±»ä½¿ç”¨">C++ arrayæ¨¡æ¿ç±»ä½¿ç”¨</a><time datetime="2020-07-24T14:52:40.000Z" title="å‘è¡¨äº 2020-07-24 22:52:40">2020-07-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/925153f2.html" title="C++ ä»£ç æ¢è¡Œçš„é—®é¢˜"><img src="/img/private/loading-4.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/MCUheart/Hexo-blog-data@1.0.2/image/cover/post-cover/c++-cover.jpg" onerror='this.onerror=null,this.src="/img/private/post_img-load-404-1.jpg"' alt="C++ ä»£ç æ¢è¡Œçš„é—®é¢˜"></a><div class="content"><a class="title" href="/posts/925153f2.html" title="C++ ä»£ç æ¢è¡Œçš„é—®é¢˜">C++ ä»£ç æ¢è¡Œçš„é—®é¢˜</a><time datetime="2020-07-24T14:24:40.000Z" title="å‘è¡¨äº 2020-07-24 22:24:40">2020-07-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/dd9d548b.html" title="C++ å¯¹æ•°ç»„è¿›è¡Œå¤åˆ¶"><img src="/img/private/loading-4.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/MCUheart/Hexo-blog-data@1.0.2/image/cover/post-cover/c++-cover.jpg" onerror='this.onerror=null,this.src="/img/private/post_img-load-404-1.jpg"' alt="C++ å¯¹æ•°ç»„è¿›è¡Œå¤åˆ¶"></a><div class="content"><a class="title" href="/posts/dd9d548b.html" title="C++ å¯¹æ•°ç»„è¿›è¡Œå¤åˆ¶">C++ å¯¹æ•°ç»„è¿›è¡Œå¤åˆ¶</a><time datetime="2020-07-24T14:20:40.000Z" title="å‘è¡¨äº 2020-07-24 22:20:40">2020-07-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/4858c62f.html" title="C++ vectorçš„ç”¨æ³•"><img src="/img/private/loading-4.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/MCUheart/Hexo-blog-data@1.0.2/image/cover/post-cover/c++-cover.jpg" onerror='this.onerror=null,this.src="/img/private/post_img-load-404-1.jpg"' alt="C++ vectorçš„ç”¨æ³•"></a><div class="content"><a class="title" href="/posts/4858c62f.html" title="C++ vectorçš„ç”¨æ³•">C++ vectorçš„ç”¨æ³•</a><time datetime="2020-07-24T14:12:40.000Z" title="å‘è¡¨äº 2020-07-24 22:12:40">2020-07-24</time></div></div></div></div><div class="card-widget ads-wrap"><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-6017375467561303" data-ad-slot="4346183088" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div></div></main><footer id="footer" style="background-image:url(https://cdn.jsdelivr.net/gh/MCUheart/Hexo-blog-data@1.0.2/image/top/post-top/ros-top.jpg)"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022<i style="color:#ff6a6a" class="fa fa-heartbeat"></i>Malloy Yuan</div><div class="footer_custom_text"><a target="_blank" rel="noopener external nofollow noreferrer" href="http://www.beian.miit.gov.cn"><img class="icp-icon" src="/img/private/loading-4.gif" data-lazy-src="/img/private/icp.png"><span>æ¹˜ICPå¤‡20005957å·</span></a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="ç®€ç¹è½¬æ¢">ç¹</button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœ¬åœ°æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i> <span>æ•°æ®åº“åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"></div></div><hr><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script>function panguFn(){"object"==typeof pangu?pangu.autoSpacingPage():getScript("https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js").then(()=>{pangu.autoSpacingPage()})}function panguInit(){panguFn()}document.addEventListener("DOMContentLoaded",panguInit)</script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(()=>{const e=document.querySelectorAll("#article-container .mermaid-wrap");if(e.length){window.runMermaid=()=>{window.loadMermaid=!0;const t="dark"===document.documentElement.getAttribute("data-theme")?"dark":"default";Array.from(e).forEach((e,n)=>{const d=e.firstElementChild,r="mermaid-"+n,i="%%{init:{ 'theme':'"+t+"'}}%%\n"+d.textContent;mermaid.mermaidAPI.render(r,i,e=>{d.insertAdjacentHTML("afterend",e)})})};const t=()=>{window.loadMermaid?runMermaid():getScript("https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js").then(runMermaid)};window.pjax?t():document.addEventListener("DOMContentLoaded",t)}})()</script><script>(()=>{const t=()=>{twikoo.init(Object.assign({el:"#twikoo-wrap",envId:"https://twikoo-five-olive.vercel.app/",region:"",onCommentLoaded:function(){btf.loadLightbox(document.querySelectorAll("#twikoo .tk-content img:not(.vemoji)"))}},null)),GLOBAL_CONFIG_SITE.isPost&&twikoo.getCommentsCount({envId:"https://twikoo-five-olive.vercel.app/",region:"",urls:[window.location.pathname],includeReply:!1}).then((function(t){document.getElementById("twikoo-count").innerText=t[0].count})).catch((function(t){console.error(t)}))},o=()=>{"object"!=typeof twikoo?getScript("https://cdn.jsdelivr.net/npm/twikoo@1.4.15/dist/twikoo.all.min.js").then(t):setTimeout(t,0)};o()})()</script></div><div class="app-refresh" id="app-refresh"><div class="app-refresh-wrap"><label>âœ¨ ç½‘ç«™å·²æ›´æ–°æœ€æ–°ç‰ˆæœ¬ ğŸ‘‰</label> <a href="javascript:void(0)" rel="external nofollow noreferrer" onclick="location.reload()">ç‚¹å‡»åˆ·æ–°</a></div></div><script>function showNotification(){if(GLOBAL_CONFIG.Snackbar){var t="light"===document.documentElement.getAttribute("data-theme")?GLOBAL_CONFIG.Snackbar.bgLight:GLOBAL_CONFIG.Snackbar.bgDark,e=GLOBAL_CONFIG.Snackbar.position;Snackbar.show({text:"å·²æ›´æ–°æœ€æ–°ç‰ˆæœ¬",backgroundColor:t,duration:5e5,pos:e,actionText:"é»æ“Šåˆ·æ–°",actionTextColor:"#fff",onActionClick:function(t){location.reload()}})}else{var o=`top: 0; background: ${"light"===document.documentElement.getAttribute("data-theme")?"#49b1f5":"#1f1f1f"};`;document.getElementById("app-refresh").style.cssText=o}}"serviceWorker"in navigator&&(navigator.serviceWorker.controller&&navigator.serviceWorker.addEventListener("controllerchange",(function(){showNotification()})),window.addEventListener("load",(function(){navigator.serviceWorker.register("/sw.js")})))</script><script defer id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!1,POWERMODE.mobile=!1,document.body.addEventListener("input",POWERMODE)</script><script src="//code.tidio.co/xmigmag8yz8wxyxf4rx4tsq9ejzzdqki.js" async></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,log:!1,model:{jsonPath:"https://cdn.jsdelivr.net/gh/MCUheart/Hexo-blog-data@1.0.2/live2d-widget-model/haru/01/assets/haru01.model.json"},display:{superSample:2,width:150,height:490,position:"left",hOffset:270,vOffset:-50},mobile:{show:!1,scale:.5},react:{opacityDefault:.7,opacityOnHover:.2}})</script></body></html>